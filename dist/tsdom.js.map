{"version":3,"sources":["tsdom.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","DOM","qry","ctx","meta","els","this","document","regex","query","nodeType","window","len","prototype","find","owner","css","obj","each","el","key","val","style","setProperty","cb","hasClass","str","result","className","replace","indexOf","addClass","_this","removeClass","reg","RegExp","on","ev","addEventListener","off","removeEventListener","test","match","doc","exec","getElementsByClassName","getElementsByTagName","getElementById","querySelectorAll","preventDefault","returnValue","default"],"mappings":"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","file":"tsdom.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Meta\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * DOM\r\n *\r\n * -------------------------------- */\r\nvar DOM = (function () {\r\n    function DOM(qry, ctx, meta) {\r\n        var els;\r\n        this.document = document;\r\n        this.meta = meta || {};\r\n        this.regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n        if (typeof qry === 'string') {\r\n            els = this.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    DOM.prototype.find = function (qry) {\r\n        return new DOM(qry, this[0], { owner: this });\r\n    };\r\n    DOM.prototype.css = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    DOM.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            var value = \" \" + str + \" \";\r\n            var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n            if (clean.indexOf(value) > -1) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    DOM.prototype.addClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (!_this.hasClass(str)) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.removeClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (_this.hasClass(str)) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                el.className = el.className.replace(reg, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.on = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.addEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.off = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.removeEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.query = function (qry, ctx) {\r\n        var doc = this.document;\r\n        var test;\r\n        var match;\r\n        if ((test = this.regex.exec(qry))) {\r\n            if ((match = test[3])) {\r\n                return ctx.getElementsByClassName(match);\r\n            }\r\n            if ((match = test[2])) {\r\n                return ctx.getElementsByTagName(match);\r\n            }\r\n            if ((match = test[1])) {\r\n                return doc.getElementById(match);\r\n            }\r\n        }\r\n        return ctx.querySelectorAll(qry);\r\n    };\r\n    return DOM;\r\n}());\r\nexports.DOM = DOM;\r\n/* -----------------------------------\r\n *\r\n * preventDefault\r\n *\r\n * -------------------------------- */\r\nfunction preventDefault(ev) {\r\n    if (ev.preventDefault) {\r\n        return ev.preventDefault();\r\n    }\r\n    return ev.returnValue = false;\r\n}\r\nexports.preventDefault = preventDefault;\r\n/* -----------------------------------\r\n *\r\n * Export\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) {\r\n    return new DOM(qry, ctx);\r\n};\r\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHNkb20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDRUE7Ozs7c0NBSXNDOztBQWtCdEM7Ozs7c0NBSXNDO0FBRXRDO0lBWUcsYUFBbUIsR0FBeUIsRUFBRSxHQUFhLEVBQUUsSUFBWTtRQUV0RSxJQUFJLEdBQVEsQ0FBQztRQUViLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLGtDQUFrQyxDQUFDO1FBRWhELEVBQUUsQ0FBQSxDQUFDLE9BQU8sR0FBRyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFFMUIsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUM7UUFFL0MsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBRUwsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUViLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUE7UUFFckIsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFFeEMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNkLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO1FBRWxCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUVMLEdBQUcsQ0FBQyxDQUNELElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQ3BDLEdBQUcsRUFBRSxFQUNMLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO2dCQUN0QixDQUFDO1FBRUwsQ0FBQztJQUVKLENBQUM7SUFHTSxrQkFBSSxHQUFYLFVBQWEsR0FBVztRQUVyQixNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBRWpELENBQUM7SUFHTSxpQkFBRyxHQUFWLFVBQVcsR0FBOEI7UUFFdEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBRWxCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsR0FBRyxDQUFBLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFFbEIsSUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUVyQixFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFbEMsQ0FBQztRQUVKLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxrQkFBSSxHQUFYLFVBQWEsRUFBNkI7UUFFdkMsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUUxQyxJQUFJLEVBQUUsR0FBZ0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTlCLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLEtBQUssQ0FBQztZQUNULENBQUM7UUFFSixDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxzQkFBUSxHQUFmLFVBQWdCLEdBQVc7UUFFeEIsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBRW5CLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsSUFBTSxLQUFLLEdBQUcsTUFBSSxHQUFHLE1BQUcsQ0FBQztZQUN6QixJQUFNLEtBQUssR0FBRyxDQUFDLE1BQUksRUFBRSxDQUFDLFNBQVMsTUFBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUU1RCxFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFNUIsTUFBTSxHQUFHLElBQUksQ0FBQztZQUVqQixDQUFDO1FBRUosQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBRWpCLENBQUM7SUFHTSxzQkFBUSxHQUFmLFVBQWdCLEdBQVc7UUFBM0IsaUJBY0M7UUFaRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsRUFBRTtZQUVULEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXRCLEVBQUUsQ0FBQyxTQUFTLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUU3QixDQUFDO1FBRUosQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBRWYsQ0FBQztJQUdNLHlCQUFXLEdBQWxCLFVBQW1CLEdBQVc7UUFBOUIsaUJBZ0JDO1FBZEUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFBLEVBQUU7WUFFVCxFQUFFLENBQUEsQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFckIsSUFBSSxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsU0FBUyxHQUFHLEdBQUcsR0FBRyxTQUFTLENBQUMsQ0FBQztnQkFFbEQsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFakQsQ0FBQztRQUVKLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxnQkFBRSxHQUFULFVBQVcsRUFBVSxFQUFFLEVBQWlCO1FBRXJDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUUvQixDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFFZixDQUFDO0lBR00saUJBQUcsR0FBVixVQUFZLEVBQVUsRUFBRSxFQUFpQjtRQUV0QyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsRUFBRTtZQUVULEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFbEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBRWYsQ0FBQztJQUdPLG1CQUFLLEdBQWIsVUFBYyxHQUFXLEVBQUUsR0FBdUI7UUFFL0MsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUUxQixJQUFJLElBQUksQ0FBQztRQUNULElBQUksS0FBSyxDQUFDO1FBRVYsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFakMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVyQixNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTVDLENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXJCLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUMsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFckIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFcEMsQ0FBQztRQUVKLENBQUM7UUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXBDLENBQUM7SUFHSixVQUFDO0FBQUQsQ0FyTkEsQUFxTkMsSUFBQTtBQXJOWSxrQkFBRztBQXdOaEI7Ozs7c0NBSXNDO0FBRXRDLHdCQUErQixFQUFTO0lBRXJDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBRXJCLE1BQU0sQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFLENBQUM7SUFFOUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxFQUFFLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUVqQyxDQUFDO0FBVkQsd0NBVUM7QUFHRDs7OztzQ0FJc0M7QUFFdEMsa0JBQWUsVUFBQyxHQUF5QixFQUFFLEdBQWlCO0lBRXpELE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFNUIsQ0FBQyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogTWV0YVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuaW50ZXJmYWNlIElNZXRhIHtcclxuICAgb3duZXI/OiBET007XHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJRG9tXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElEb20ge1xyXG4gICAocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogSFRNTEVsZW1lbnQpOiBET007XHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBET01cclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBET00ge1xyXG5cclxuXHJcbiAgIFtpbmRleDogbnVtYmVyXTogSFRNTEVsZW1lbnQ7XHJcblxyXG5cclxuICAgZG9jdW1lbnQ6IERvY3VtZW50O1xyXG4gICBtZXRhOiBJTWV0YTtcclxuICAgcmVnZXg6IFJlZ0V4cDtcclxuICAgbGVuZ3RoOiBudW1iZXI7XHJcblxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHFyeTogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIGN0eD86IEVsZW1lbnQsIG1ldGE/OiBJTWV0YSkge1xyXG5cclxuICAgICAgbGV0IGVsczogYW55O1xyXG5cclxuICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICB0aGlzLm1ldGEgPSBtZXRhIHx8IHt9O1xyXG4gICAgICB0aGlzLnJlZ2V4ID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC87XHJcblxyXG4gICAgICBpZih0eXBlb2YgcXJ5ID09PSAnc3RyaW5nJykge1xyXG5cclxuICAgICAgICAgZWxzID0gdGhpcy5xdWVyeShxcnksIGN0eCA/IGN0eCA6IGRvY3VtZW50KTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICBlbHMgPSBxcnk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWVscykgcmV0dXJuIHRoaXNcclxuXHJcbiAgICAgIGlmIChlbHMubm9kZVR5cGUgPT09IDEgfHwgZWxzID09PSB3aW5kb3cpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIHRoaXNbMF0gPSBlbHM7XHJcbiAgICAgICAgIHRoaXMubGVuZ3RoID0gMVxyXG4gICAgXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgbGVuID0gKHRoaXMubGVuZ3RoID0gZWxzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxlbi0tO1xyXG4gICAgICAgICAgICB0aGlzW2xlbl0gPSBlbHNbbGVuXVxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBmaW5kIChxcnk6IHN0cmluZykge1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBET00ocXJ5LCB0aGlzWzBdLCB7IG93bmVyOiB0aGlzIH0pO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBjc3Mob2JqOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcblxyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBmb3IobGV0IGtleSBpbiBvYmopIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IG9ialtrZXldO1xyXG5cclxuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWwpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZWFjaCAoY2I6IChlbDogSFRNTEVsZW1lbnQpID0+IHZvaWQpIHtcclxuXHJcbiAgICAgIGZvcihsZXQgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoOyBpIDwgbGVuOykge1xyXG5cclxuICAgICAgICAgbGV0IGVsOiBIVE1MRWxlbWVudCA9IHRoaXNbaV07XHJcblxyXG4gICAgICAgICBpZihjYi5jYWxsKHRoaXMsIHRoaXNbaV0sIGkrKykgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBoYXNDbGFzcyhzdHI6IHN0cmluZykge1xyXG5cclxuICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGNvbnN0IHZhbHVlID0gYCAke3N0cn0gYDtcclxuICAgICAgICAgY29uc3QgY2xlYW4gPSAoYCAke2VsLmNsYXNzTmFtZX0gYCkucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKTtcclxuXHJcbiAgICAgICAgIGlmKGNsZWFuLmluZGV4T2YodmFsdWUpID4gLTEpIHtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGFkZENsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgaWYoIXRoaXMuaGFzQ2xhc3Moc3RyKSkge1xyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIHN0cjtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIHJlbW92ZUNsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgaWYodGhpcy5oYXNDbGFzcyhzdHIpKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIHN0ciArICcoXFxcXHN8JCknKTtcclxuXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKHJlZywgJyAnKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIG9uIChldjogc3RyaW5nLCBjYjogRXZlbnRMaXN0ZW5lcikge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXYsIGNiKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG4gICBcclxuICAgcHVibGljIG9mZiAoZXY6IHN0cmluZywgY2I6IEV2ZW50TGlzdGVuZXIpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2LCBjYik7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHByaXZhdGUgcXVlcnkocXJ5OiBzdHJpbmcsIGN0eDogRWxlbWVudCB8IERvY3VtZW50KSB7XHJcblxyXG4gICAgICBjb25zdCBkb2MgPSB0aGlzLmRvY3VtZW50O1xyXG5cclxuICAgICAgbGV0IHRlc3Q7XHJcbiAgICAgIGxldCBtYXRjaDtcclxuXHJcbiAgICAgIGlmICgodGVzdCA9IHRoaXMucmVnZXguZXhlYyhxcnkpKSkge1xyXG5cclxuICAgICAgICAgaWYgKChtYXRjaCA9IHRlc3RbM10pKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY3R4LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobWF0Y2gpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKChtYXRjaCA9IHRlc3RbMl0pKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY3R4LmdldEVsZW1lbnRzQnlUYWdOYW1lKG1hdGNoKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzFdKSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRvYy5nZXRFbGVtZW50QnlJZChtYXRjaCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY3R4LnF1ZXJ5U2VsZWN0b3JBbGwocXJ5KTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogcHJldmVudERlZmF1bHRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldjogRXZlbnQpIHtcclxuXHJcbiAgIGlmIChldi5wcmV2ZW50RGVmYXVsdCkge1xyXG5cclxuICAgICAgcmV0dXJuIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIFxyXG4gICB9XHJcblxyXG4gICByZXR1cm4gZXYucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuXHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBFeHBvcnRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IChxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cclxuICAgcmV0dXJuIG5ldyBET00ocXJ5LCBjdHgpO1xyXG4gICBcclxufTsiXX0=\n"]}