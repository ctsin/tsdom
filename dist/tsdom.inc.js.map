{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","./index","2","Object","defineProperty","value","TSDom","qry","ctx","meta","els","document","regex","events","query","nodeType","len","prototype","find","owner","each","cb","css","obj","el","key","val","style","setProperty","hasClass","str","result","className","replace","indexOf","addClass","_this","removeClass","reg","RegExp","on","ev","off","addEventListener","push","type","handler","active","findEvent","undefined","removeEventListener","filter","evt","event","test","match","doc","exec","getElementsByClassName","getElementsByTagName","getElementById","querySelectorAll","_ev","preventDefault","returnValue"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = require('./index').default;\n},{\"./index\":2}],2:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Meta\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * TSDom\r\n *\r\n * -------------------------------- */\r\nvar TSDom = (function () {\r\n    function TSDom(qry, ctx, meta) {\r\n        var els;\r\n        this.document = document;\r\n        this.meta = meta || {};\r\n        this.regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n        this.events = [];\r\n        if (typeof qry === 'string') {\r\n            els = this.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    TSDom.prototype.find = function (qry) {\r\n        return new TSDom(qry, this[0], { owner: this });\r\n    };\r\n    TSDom.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    TSDom.prototype.css = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDom.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            var value = \" \" + str + \" \";\r\n            var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n            if (clean.indexOf(value) > -1) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    TSDom.prototype.addClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (!_this.hasClass(str)) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDom.prototype.removeClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (_this.hasClass(str)) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                el.className = el.className.replace(reg, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDom.prototype.on = function (ev, cb) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            self.off(ev);\r\n            el.addEventListener(ev, cb, false);\r\n            self.events.push({\r\n                type: ev,\r\n                handler: cb\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    TSDom.prototype.off = function (ev) {\r\n        var _this = this;\r\n        var self = this;\r\n        var events = this.events;\r\n        this.each(function (el) {\r\n            var active = _this.findEvent(ev);\r\n            if (active !== undefined) {\r\n                el.removeEventListener(ev, active.handler, false);\r\n            }\r\n        });\r\n        this.events = events.filter(function (evt) {\r\n            return (evt.type !== ev);\r\n        }, event);\r\n        return this;\r\n    };\r\n    TSDom.prototype.query = function (qry, ctx) {\r\n        var doc = this.document;\r\n        var test;\r\n        var match;\r\n        if ((test = this.regex.exec(qry))) {\r\n            if ((match = test[3])) {\r\n                return ctx.getElementsByClassName(match);\r\n            }\r\n            if ((match = test[2])) {\r\n                return ctx.getElementsByTagName(match);\r\n            }\r\n            if ((match = test[1])) {\r\n                return doc.getElementById(match);\r\n            }\r\n        }\r\n        return ctx.querySelectorAll(qry);\r\n    };\r\n    TSDom.prototype.findEvent = function (ev) {\r\n        var events = this.events;\r\n        return events.filter(function (_ev) {\r\n            return (_ev.type === ev);\r\n        }, ev)[0];\r\n    };\r\n    return TSDom;\r\n}());\r\nexports.TSDom = TSDom;\r\n/* -----------------------------------\r\n *\r\n * preventDefault\r\n *\r\n * -------------------------------- */\r\nfunction preventDefault(ev) {\r\n    if (ev.preventDefault) {\r\n        return ev.preventDefault();\r\n    }\r\n    return ev.returnValue = false;\r\n}\r\nexports.preventDefault = preventDefault;\r\n/* -----------------------------------\r\n *\r\n * Export\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) {\r\n    return new TSDom(qry, ctx);\r\n};\r\n},{}]},{},[1])(1)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5jbHVkZS5qcyIsInNyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7QUNFQTs7OztzQ0FJc0M7O0FBbUJ0Qzs7OztzQ0FJc0M7QUFFdEM7SUFhRyxlQUFtQixHQUF5QixFQUFFLEdBQWEsRUFBRSxJQUFnQjtRQUUxRSxJQUFJLEdBQVEsQ0FBQztRQUViLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLGtDQUFrQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBRWpCLEVBQUUsQ0FBQSxDQUFDLE9BQU8sR0FBRyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFFMUIsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUM7UUFFL0MsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBRUwsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUViLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUE7UUFFckIsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFFeEMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNkLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO1FBRWxCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUVMLEdBQUcsQ0FBQyxDQUNELElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQ3BDLEdBQUcsRUFBRSxFQUNMLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO2dCQUN0QixDQUFDO1FBRUwsQ0FBQztJQUVKLENBQUM7SUFHTSxvQkFBSSxHQUFYLFVBQWEsR0FBVztRQUVyQixNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBRW5ELENBQUM7SUFHTSxvQkFBSSxHQUFYLFVBQWEsRUFBNkI7UUFFdkMsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUUxQyxJQUFJLEVBQUUsR0FBZ0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTlCLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLEtBQUssQ0FBQztZQUNULENBQUM7UUFFSixDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxtQkFBRyxHQUFWLFVBQVcsR0FBOEI7UUFFdEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBRWxCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsR0FBRyxDQUFBLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFFbEIsSUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUVyQixFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFbEMsQ0FBQztRQUVKLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSx3QkFBUSxHQUFmLFVBQWdCLEdBQVc7UUFFeEIsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBRW5CLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsSUFBTSxLQUFLLEdBQUcsTUFBSSxHQUFHLE1BQUcsQ0FBQztZQUN6QixJQUFNLEtBQUssR0FBRyxDQUFDLE1BQUksRUFBRSxDQUFDLFNBQVMsTUFBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUU1RCxFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFNUIsTUFBTSxHQUFHLElBQUksQ0FBQztZQUVqQixDQUFDO1FBRUosQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBRWpCLENBQUM7SUFHTSx3QkFBUSxHQUFmLFVBQWdCLEdBQVc7UUFBM0IsaUJBY0M7UUFaRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsRUFBRTtZQUVULEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXRCLEVBQUUsQ0FBQyxTQUFTLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUU3QixDQUFDO1FBRUosQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBRWYsQ0FBQztJQUdNLDJCQUFXLEdBQWxCLFVBQW1CLEdBQVc7UUFBOUIsaUJBZ0JDO1FBZEUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFBLEVBQUU7WUFFVCxFQUFFLENBQUEsQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFckIsSUFBSSxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsU0FBUyxHQUFHLEdBQUcsR0FBRyxTQUFTLENBQUMsQ0FBQztnQkFFbEQsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFakQsQ0FBQztRQUVKLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxrQkFBRSxHQUFULFVBQVcsRUFBVSxFQUFFLEVBQWlCO1FBRXJDLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztRQUVsQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsRUFBRTtZQUVULElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFYixFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUVuQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDZCxJQUFJLEVBQUUsRUFBRTtnQkFDUixPQUFPLEVBQUUsRUFBRTthQUNiLENBQUMsQ0FBQztRQUVOLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztJQUVmLENBQUM7SUFHTSxtQkFBRyxHQUFWLFVBQVksRUFBVTtRQUF0QixpQkF5QkM7UUF2QkUsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ1YsSUFBQSxvQkFBTSxDQUFVO1FBRXhCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO1lBRVQsSUFBTSxNQUFNLEdBQUcsS0FBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVsQyxFQUFFLENBQUEsQ0FBQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFFdkIsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBRXJELENBQUM7UUFFSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFTLEdBQUc7WUFFckMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQztRQUU1QixDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFVixNQUFNLENBQUMsSUFBSSxDQUFDO0lBRWYsQ0FBQztJQUdPLHFCQUFLLEdBQWIsVUFBYyxHQUFXLEVBQUUsR0FBdUI7UUFFL0MsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUUxQixJQUFJLElBQUksQ0FBQztRQUNULElBQUksS0FBSyxDQUFDO1FBRVYsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFakMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVyQixNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTVDLENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXJCLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUMsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFckIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFcEMsQ0FBQztRQUVKLENBQUM7UUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXBDLENBQUM7SUFHTyx5QkFBUyxHQUFqQixVQUFrQixFQUFVO1FBRWpCLElBQUEsb0JBQU0sQ0FBVTtRQUV4QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFTLEdBQUc7WUFFOUIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQztRQUU1QixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFYixDQUFDO0lBR0osWUFBQztBQUFELENBNVBBLEFBNFBDLElBQUE7QUE1UFksc0JBQUs7QUErUGxCOzs7O3NDQUlzQztBQUV0Qyx3QkFBK0IsRUFBUztJQUVyQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUVyQixNQUFNLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRTlCLENBQUM7SUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFFakMsQ0FBQztBQVZELHdDQVVDO0FBR0Q7Ozs7c0NBSXNDO0FBRXRDLGtCQUFlLFVBQUMsR0FBeUIsRUFBRSxHQUFpQjtJQUV6RCxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRTlCLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaW5kZXgnKS5kZWZhdWx0OyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogTWV0YVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVFNEX01ldGEge1xyXG4gICBvd25lcj86IFRTRG9tO1xyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXZlbnRzXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElUU0RfRXZlbnRzIHtcclxuICAgdHlwZTogc3RyaW5nO1xyXG4gICBoYW5kbGVyOiBFdmVudExpc3RlbmVyO1xyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogVFNEb21cclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBUU0RvbSB7XHJcblxyXG5cclxuICAgW2luZGV4OiBudW1iZXJdOiBIVE1MRWxlbWVudDtcclxuXHJcblxyXG4gICBkb2N1bWVudDogRG9jdW1lbnQ7XHJcbiAgIG1ldGE6IElUU0RfTWV0YTtcclxuICAgcmVnZXg6IFJlZ0V4cDtcclxuICAgbGVuZ3RoOiBudW1iZXI7XHJcbiAgIGV2ZW50czogSVRTRF9FdmVudHNbXTtcclxuXHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogRWxlbWVudCwgbWV0YT86IElUU0RfTWV0YSkge1xyXG5cclxuICAgICAgbGV0IGVsczogYW55O1xyXG5cclxuICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xyXG4gICAgICB0aGlzLm1ldGEgPSBtZXRhIHx8IHt9O1xyXG4gICAgICB0aGlzLnJlZ2V4ID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC87XHJcbiAgICAgIHRoaXMuZXZlbnRzID0gW107XHJcblxyXG4gICAgICBpZih0eXBlb2YgcXJ5ID09PSAnc3RyaW5nJykge1xyXG5cclxuICAgICAgICAgZWxzID0gdGhpcy5xdWVyeShxcnksIGN0eCA/IGN0eCA6IGRvY3VtZW50KTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICBlbHMgPSBxcnk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWVscykgcmV0dXJuIHRoaXNcclxuXHJcbiAgICAgIGlmIChlbHMubm9kZVR5cGUgPT09IDEgfHwgZWxzID09PSB3aW5kb3cpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIHRoaXNbMF0gPSBlbHM7XHJcbiAgICAgICAgIHRoaXMubGVuZ3RoID0gMVxyXG4gICAgXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgbGVuID0gKHRoaXMubGVuZ3RoID0gZWxzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxlbi0tO1xyXG4gICAgICAgICAgICB0aGlzW2xlbl0gPSBlbHNbbGVuXVxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBmaW5kIChxcnk6IHN0cmluZykge1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBUU0RvbShxcnksIHRoaXNbMF0sIHsgb3duZXI6IHRoaXMgfSk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGVhY2ggKGNiOiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkKSB7XHJcblxyXG4gICAgICBmb3IobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aDsgaSA8IGxlbjspIHtcclxuXHJcbiAgICAgICAgIGxldCBlbDogSFRNTEVsZW1lbnQgPSB0aGlzW2ldO1xyXG5cclxuICAgICAgICAgaWYoY2IuY2FsbCh0aGlzLCB0aGlzW2ldLCBpKyspID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgY3NzKG9iajogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xyXG5cclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGhhc0NsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgY29uc3QgdmFsdWUgPSBgICR7c3RyfSBgO1xyXG4gICAgICAgICBjb25zdCBjbGVhbiA9IChgICR7ZWwuY2xhc3NOYW1lfSBgKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xyXG5cclxuICAgICAgICAgaWYoY2xlYW4uaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgYWRkQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZighdGhpcy5oYXNDbGFzcyhzdHIpKSB7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgc3RyO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZih0aGlzLmhhc0NsYXNzKHN0cikpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXFxcXHN8XiknICsgc3RyICsgJyhcXFxcc3wkKScpO1xyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgb24gKGV2OiBzdHJpbmcsIGNiOiBFdmVudExpc3RlbmVyKSB7XHJcblxyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBzZWxmLm9mZihldik7XHJcblxyXG4gICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2LCBjYiwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgc2VsZi5ldmVudHMucHVzaCh7XHJcbiAgICAgICAgICAgIHR5cGU6IGV2LFxyXG4gICAgICAgICAgICBoYW5kbGVyOiBjYlxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG4gICBcclxuICAgcHVibGljIG9mZiAoZXY6IHN0cmluZykge1xyXG5cclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgIGNvbnN0IHsgZXZlbnRzIH0gPSB0aGlzOyBcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBjb25zdCBhY3RpdmUgPSB0aGlzLmZpbmRFdmVudChldik7XHJcblxyXG4gICAgICAgICBpZihhY3RpdmUgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgYWN0aXZlLmhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5ldmVudHMgPSBldmVudHMuZmlsdGVyKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBcclxuICAgICAgICAgcmV0dXJuIChldnQudHlwZSAhPT0gZXYpO1xyXG4gICAgICBcclxuICAgICAgfSwgZXZlbnQpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHJpdmF0ZSBxdWVyeShxcnk6IHN0cmluZywgY3R4OiBFbGVtZW50IHwgRG9jdW1lbnQpIHtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IHRoaXMuZG9jdW1lbnQ7XHJcblxyXG4gICAgICBsZXQgdGVzdDtcclxuICAgICAgbGV0IG1hdGNoO1xyXG5cclxuICAgICAgaWYgKCh0ZXN0ID0gdGhpcy5yZWdleC5leGVjKHFyeSkpKSB7XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFszXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdHguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtYXRjaCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFsyXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdHguZ2V0RWxlbWVudHNCeVRhZ05hbWUobWF0Y2gpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKChtYXRjaCA9IHRlc3RbMV0pKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZG9jLmdldEVsZW1lbnRCeUlkKG1hdGNoKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBjdHgucXVlcnlTZWxlY3RvckFsbChxcnkpO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHByaXZhdGUgZmluZEV2ZW50KGV2OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGNvbnN0IHsgZXZlbnRzIH0gPSB0aGlzO1xyXG5cclxuICAgICAgcmV0dXJuIGV2ZW50cy5maWx0ZXIoZnVuY3Rpb24oX2V2KSB7XHJcblxyXG4gICAgICAgICByZXR1cm4gKF9ldi50eXBlID09PSBldik7XHJcblxyXG4gICAgICB9LCBldilbMF07XHJcblxyXG4gICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIHByZXZlbnREZWZhdWx0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXY6IEV2ZW50KSB7XHJcblxyXG4gICBpZiAoZXYucHJldmVudERlZmF1bHQpIHtcclxuXHJcbiAgICAgIHJldHVybiBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBcclxuICAgfVxyXG5cclxuICAgcmV0dXJuIGV2LnJldHVyblZhbHVlID0gZmFsc2U7XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCAocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogSFRNTEVsZW1lbnQpID0+IHtcclxuXHJcbiAgIHJldHVybiBuZXcgVFNEb20ocXJ5LCBjdHgpO1xyXG4gICBcclxufTsiXX0=\n"]}