{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","Object","defineProperty","value","index_1","delegate","scope","query","cb","ev","el","hit","Instance","each","_el","test","target","parentNode","../index","2","direct","currentTarget","3","registry_1","registry","direct_1","delegate_1","./delegate","./direct","./registry","4","Registry","list","prototype","find","filter","_ev","type","add","push","remove","5","default","./index","6","utility","event","qry","ctx","meta","els","events","document","nodeType","len","first","owner","closest","match","querySelectorAll","item","parentElement","css","obj","key","val","style","setProperty","attr","getAttribute","_i","_a","keys","setAttribute","hasClass","str","result","addClass","className","removeClass","reg","RegExp","replace","trim","toggleClass","on","op1","op2","undefined","addEventListener","handler","off","forEach","removeEventListener","text","innerText","innerHTML","data","html","append","insertAdjacentHTML","appendChild","prepend","insertBefore","firstChild","empty","removeChild","toArray","array","./event","./utility","7","indexOf","8","__export","m","p","hasOwnProperty","./hasClass","./query","9","regex","exec","getElementsByClassName","getElementsByTagName","getElementById"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar index_1 = require(\"../index\");\r\n/* -----------------------------------\r\n *\r\n * Delegate\r\n *\r\n * -------------------------------- */\r\nfunction delegate(scope, query, cb) {\r\n    return function (ev) {\r\n        var $elements = new index_1.Instance(query, scope);\r\n        var el = null;\r\n        var hit = false;\r\n        $elements.each(function (_el) {\r\n            var test = ev.target;\r\n            if (test == _el) {\r\n                hit = true;\r\n                el = test;\r\n                return;\r\n            }\r\n            while (test && test !== scope) {\r\n                test = test.parentNode;\r\n                if (test == _el) {\r\n                    hit = true;\r\n                    el = test;\r\n                }\r\n            }\r\n        });\r\n        if (hit) {\r\n            cb(ev, el);\r\n        }\r\n    };\r\n}\r\nexports.delegate = delegate;\r\n},{\"../index\":6}],2:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Direct\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction direct(cb) {\r\n    return function (ev) {\r\n        var el = ev.currentTarget;\r\n        cb(ev, el);\r\n    };\r\n}\r\nexports.direct = direct;\r\n},{}],3:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar registry_1 = require(\"./registry\");\r\nexports.registry = registry_1.registry;\r\nvar direct_1 = require(\"./direct\");\r\nexports.direct = direct_1.direct;\r\nvar delegate_1 = require(\"./delegate\");\r\nexports.delegate = delegate_1.delegate;\r\n},{\"./delegate\":1,\"./direct\":2,\"./registry\":4}],4:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * IEvents\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * Registry\r\n *\r\n * -------------------------------- */\r\nvar Registry = /** @class */ (function () {\r\n    function Registry() {\r\n        this.list = [];\r\n    }\r\n    Registry.prototype.find = function (ev) {\r\n        var list = this.list;\r\n        return list.filter(function (_ev) { return _ev.type === ev; });\r\n    };\r\n    Registry.prototype.add = function (ev) {\r\n        this.list.push(ev);\r\n    };\r\n    Registry.prototype.remove = function (ev) {\r\n        var list = this.list;\r\n        this.list = list.filter(function (_ev) { return _ev.type !== ev; });\r\n    };\r\n    return Registry;\r\n}());\r\nexports.Registry = Registry;\r\n/* -----------------------------------\r\n *\r\n * Function\r\n *\r\n * -------------------------------- */\r\nfunction registry() {\r\n    return new Registry();\r\n}\r\nexports.registry = registry;\r\n},{}],5:[function(require,module,exports){\nmodule.exports = require('./index').default;\n},{\"./index\":6}],6:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utility = require(\"./utility\");\r\nvar event = require(\"./event\");\r\n/* -----------------------------------\r\n *\r\n * Instance\r\n *\r\n * -------------------------------- */\r\nvar Instance = /** @class */ (function () {\r\n    function Instance(qry, ctx, meta) {\r\n        var els;\r\n        this.meta = meta || {};\r\n        this.events = event.registry();\r\n        if (typeof qry === 'string') {\r\n            els = utility.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    Instance.prototype.first = function () {\r\n        return new Instance(this[0]);\r\n    };\r\n    Instance.prototype.find = function (qry) {\r\n        return new Instance(qry, this[0], { owner: this });\r\n    };\r\n    Instance.prototype.closest = function (qry) {\r\n        var match = document.querySelectorAll(qry);\r\n        var el = this[0];\r\n        var i;\r\n        do {\r\n            i = match.length;\r\n            while (--i >= 0 && match.item(i) !== el) { }\r\n            ;\r\n        } while ((i < 0) && (el = el.parentElement));\r\n        return new Instance(el);\r\n    };\r\n    Instance.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Instance.prototype.css = function (obj) {\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.attr = function (obj) {\r\n        if (typeof obj === 'string') {\r\n            var value = this[0].getAttribute(obj);\r\n            return value;\r\n        }\r\n        this.each(function (el) {\r\n            for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var val = obj[key];\r\n                el.setAttribute(key, val);\r\n            }\r\n        });\r\n    };\r\n    Instance.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            result = utility.hasClass(el, str);\r\n        });\r\n        return result;\r\n    };\r\n    Instance.prototype.addClass = function (str) {\r\n        this.each(function (el) {\r\n            var state = utility.hasClass(el, str);\r\n            if (!state) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.removeClass = function (str) {\r\n        this.each(function (el) {\r\n            var state = utility.hasClass(el, str);\r\n            if (state) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                var val = el.className.replace(reg, ' ').trim();\r\n                el.className = val.replace(/\\s{2,}/g, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.toggleClass = function (str) {\r\n        if (this.hasClass(str)) {\r\n            this.removeClass(str);\r\n        }\r\n        else {\r\n            this.addClass(str);\r\n        }\r\n        return this;\r\n    };\r\n    Instance.prototype.on = function (ev, op1, op2) {\r\n        var events = this.events;\r\n        var direct = typeof op1 === 'function' && op2 === undefined;\r\n        var delegate = typeof op1 === 'string' && typeof op2 === 'function';\r\n        this.each(function (el) {\r\n            var cb = null;\r\n            if (direct) {\r\n                cb = event.direct(op1);\r\n            }\r\n            if (delegate) {\r\n                cb = event.delegate(el, op1, op2);\r\n            }\r\n            if (cb) {\r\n                el.addEventListener(ev, cb, true);\r\n                events.add({\r\n                    type: ev,\r\n                    handler: cb\r\n                });\r\n            }\r\n            else {\r\n                throw new Error('TSDom.on: Invalid Arguments');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.off = function (ev) {\r\n        var events = this.events;\r\n        this.each(function (el) {\r\n            var items = events.find(ev);\r\n            items.forEach(function (item) {\r\n                if (item !== undefined) {\r\n                    el.removeEventListener(ev, item.handler, true);\r\n                }\r\n            });\r\n        });\r\n        events.remove(ev);\r\n        return this;\r\n    };\r\n    Instance.prototype.val = function (val) {\r\n        var el = this[0];\r\n        if (el.value === undefined) {\r\n            return null;\r\n        }\r\n        if (val === undefined) {\r\n            return el.value;\r\n        }\r\n        el.value = val;\r\n        return val;\r\n    };\r\n    Instance.prototype.text = function (val) {\r\n        if (val == undefined) {\r\n            return this[0].innerText;\r\n        }\r\n        this.each(function (el) {\r\n            el.innerHTML = val;\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.data = function (key, val) {\r\n        if (val == undefined) {\r\n            return this[0].getAttribute(\"data-\" + key);\r\n        }\r\n        this.each(function (el) {\r\n            el.setAttribute(\"data-\" + key, val);\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.html = function (val) {\r\n        if (val == undefined) {\r\n            return this[0].innerHTML;\r\n        }\r\n        this.each(function (el) {\r\n            el.innerHTML = val;\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.append = function (item) {\r\n        this.each(function (el) {\r\n            if (typeof item === 'string') {\r\n                return el.insertAdjacentHTML('beforeend', item);\r\n            }\r\n            el.appendChild(item);\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.prepend = function (item) {\r\n        this.each(function (el) {\r\n            if (typeof item === 'string') {\r\n                return el.insertAdjacentHTML('afterbegin', item);\r\n            }\r\n            el.insertBefore(item, el.firstChild);\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.empty = function () {\r\n        this.each(function (el) {\r\n            while (el.firstChild) {\r\n                el.removeChild(el.firstChild);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.remove = function () {\r\n        this.each(function (el) {\r\n            el.parentNode.removeChild(el);\r\n        });\r\n    };\r\n    Instance.prototype.toArray = function () {\r\n        var array = [];\r\n        this.each(function (el) {\r\n            array.push(el);\r\n        });\r\n        return array;\r\n    };\r\n    return Instance;\r\n}());\r\nexports.Instance = Instance;\r\n/* -----------------------------------\r\n *\r\n * Constructor\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) { return new Instance(qry, ctx); };\r\n},{\"./event\":3,\"./utility\":8}],7:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * hasClass\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction hasClass(el, str) {\r\n    var result = false;\r\n    var value = \" \" + str + \" \";\r\n    var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n    if (clean.indexOf(value) > -1) {\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\nexports.hasClass = hasClass;\r\n},{}],8:[function(require,module,exports){\n\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./query\"));\r\n__export(require(\"./hasClass\"));\r\n},{\"./hasClass\":7,\"./query\":9}],9:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Variables\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n/* -----------------------------------\r\n *\r\n * Query\r\n *\r\n * -------------------------------- */\r\nfunction query(qry, ctx) {\r\n    var test;\r\n    var match;\r\n    if ((test = regex.exec(qry))) {\r\n        if ((match = test[3])) {\r\n            return ctx.getElementsByClassName(match);\r\n        }\r\n        if ((match = test[2])) {\r\n            return ctx.getElementsByTagName(match);\r\n        }\r\n        if ((match = test[1])) {\r\n            return document.getElementById(match);\r\n        }\r\n    }\r\n    return ctx.querySelectorAll(qry);\r\n}\r\nexports.query = query;\r\n},{}]},{},[5])(5)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXZlbnQvZGVsZWdhdGUudHMiLCJzcmMvZXZlbnQvZGlyZWN0LnRzIiwic3JjL2V2ZW50L2luZGV4LnRzIiwic3JjL2V2ZW50L3JlZ2lzdHJ5LnRzIiwic3JjL2luY2x1ZGUuanMiLCJzcmMvaW5kZXgudHMiLCJzcmMvdXRpbGl0eS9oYXNDbGFzcy50cyIsInNyYy91dGlsaXR5L2luZGV4LnRzIiwic3JjL3V0aWxpdHkvcXVlcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLGtDQUFvQztBQUdwQzs7OztzQ0FJc0M7QUFFdEMsa0JBQ0csS0FBa0IsRUFDbEIsS0FBYSxFQUNiLEVBQXdDO0lBR3hDLE1BQU0sQ0FBQyxVQUFDLEVBQVM7UUFFZCxJQUFNLFNBQVMsR0FBRyxJQUFJLGdCQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTdDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQztRQUNkLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQztRQUVoQixTQUFTLENBQUMsSUFBSSxDQUFDLFVBQUEsR0FBRztZQUVmLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxNQUFhLENBQUM7WUFFNUIsRUFBRSxDQUFBLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBRWQsR0FBRyxHQUFHLElBQUksQ0FBQztnQkFDWCxFQUFFLEdBQUcsSUFBSSxDQUFDO2dCQUVWLE1BQU0sQ0FBQztZQUVWLENBQUM7WUFFRCxPQUFNLElBQUksSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFLENBQUM7Z0JBRTVCLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUV2QixFQUFFLENBQUEsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFFZCxHQUFHLEdBQUcsSUFBSSxDQUFDO29CQUNYLEVBQUUsR0FBRyxJQUFJLENBQUM7Z0JB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akIsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFFakIsQ0FBQztBQVNRLDRCQUFROzs7Ozs7O0FDbkNqQiw2QkFBd0I7QUFDeEIsZ0NBQTJCOzs7QUNDM0I7Ozs7c0NBSXNDOztBQUV0QyxJQUFNLEtBQUssR0FBRyxrQ0FBa0MsQ0FBQztBQUdqRDs7OztzQ0FJc0M7QUFFdEMsZUFDRyxHQUFXLEVBQ1gsR0FBdUI7SUFHdkIsSUFBSSxJQUFJLENBQUM7SUFDVCxJQUFJLEtBQUssQ0FBQztJQUVWLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXJCLE1BQU0sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFNUMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVyQixNQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTFDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFekMsQ0FBQztJQUVKLENBQUM7SUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRXBDLENBQUM7QUFTUSxzQkFBSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBJbnN0YW5jZSB9IGZyb20gJy4uL2luZGV4JztcclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBEZWxlZ2F0ZVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gZGVsZWdhdGUoXHJcbiAgIHNjb3BlOiBIVE1MRWxlbWVudCxcclxuICAgcXVlcnk6IHN0cmluZyxcclxuICAgY2I6IChldjogRXZlbnQsIGVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZFxyXG4pIHtcclxuXHJcbiAgIHJldHVybiAoZXY6IEV2ZW50KSA9PiB7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCAkZWxlbWVudHMgPSBuZXcgSW5zdGFuY2UocXVlcnksIHNjb3BlKTtcclxuXHJcbiAgICAgIGxldCBlbCA9IG51bGw7XHJcbiAgICAgIGxldCBoaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICRlbGVtZW50cy5lYWNoKF9lbCA9PiB7XHJcblxyXG4gICAgICAgICBsZXQgdGVzdCA9IGV2LnRhcmdldCBhcyBhbnk7XHJcblxyXG4gICAgICAgICBpZih0ZXN0ID09IF9lbCkge1xyXG5cclxuICAgICAgICAgICAgaGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWwgPSB0ZXN0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgd2hpbGUodGVzdCAmJiB0ZXN0ICE9PSBzY29wZSkge1xyXG5cclxuICAgICAgICAgICAgdGVzdCA9IHRlc3QucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRlc3QgPT0gX2VsKSB7XHJcblxyXG4gICAgICAgICAgICAgICBoaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICBlbCA9IHRlc3Q7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmKGhpdCkge1xyXG4gICAgICAgICBcclxuICAgICAgICAgY2IoZXYsIGVsKTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgIH07XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgeyBkZWxlZ2F0ZSB9OyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRGlyZWN0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5mdW5jdGlvbiBkaXJlY3QoXHJcbiAgIGNiOiAoZXY6IEV2ZW50LCBlbDogSFRNTEVsZW1lbnQpID0+IHZvaWRcclxuKSB7XHJcblxyXG4gICByZXR1cm4gKGV2OiBFdmVudCkgPT4ge1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZWwgPSBldi5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgY2IoZXYsIGVsKTtcclxuICAgICAgXHJcbiAgIH07XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgeyBkaXJlY3QgfTsiLCJpbXBvcnQgeyByZWdpc3RyeSB9IGZyb20gJy4vcmVnaXN0cnknO1xyXG5pbXBvcnQgeyBkaXJlY3QgfSBmcm9tICcuL2RpcmVjdCc7XHJcbmltcG9ydCB7IGRlbGVnYXRlIH0gZnJvbSAnLi9kZWxlZ2F0ZSc7XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXZlbnRzXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQge1xyXG4gICByZWdpc3RyeSxcclxuICAgZGlyZWN0LFxyXG4gICBkZWxlZ2F0ZVxyXG59OyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogSUV2ZW50c1xyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHR5cGUgSUV2ZW50cyA9IFJlZ2lzdHJ5O1xyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIElFdmVudFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnQge1xyXG4gICB0eXBlOiBzdHJpbmc7XHJcbiAgIGhhbmRsZXI6IEV2ZW50TGlzdGVuZXI7XHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJSGFuZGxlclxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHR5cGUgSUhhbmRsZXIgPSAoZXY6IEV2ZW50LCBlbDogSFRNTEVsZW1lbnQpID0+IHZvaWQ7XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogUmVnaXN0cnlcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBSZWdpc3RyeSB7XHJcblxyXG5cclxuICAgcHJpdmF0ZSBsaXN0OiBJRXZlbnRbXTtcclxuXHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICB0aGlzLmxpc3QgPSBbXTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZmluZChldjogc3RyaW5nKSB7XHJcblxyXG4gICAgICBjb25zdCB7IGxpc3QgfSA9IHRoaXM7XHJcblxyXG4gICAgICByZXR1cm4gbGlzdC5maWx0ZXIoX2V2ID0+IF9ldi50eXBlID09PSBldik7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGFkZChldjogSUV2ZW50KSB7XHJcblxyXG4gICAgICB0aGlzLmxpc3QucHVzaChldilcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlKGV2OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGNvbnN0IHsgbGlzdCB9ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMubGlzdCA9IGxpc3QuZmlsdGVyKF9ldiA9PiBfZXYudHlwZSAhPT0gZXYpO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBGdW5jdGlvblxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gcmVnaXN0cnkoKSB7XHJcblxyXG4gICByZXR1cm4gbmV3IFJlZ2lzdHJ5KCk7XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgeyByZWdpc3RyeSB9OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pbmRleCcpLmRlZmF1bHQ7IiwiaW1wb3J0ICogYXMgdXRpbGl0eSBmcm9tICcuL3V0aWxpdHknO1xyXG5pbXBvcnQgKiBhcyBldmVudCBmcm9tICcuL2V2ZW50JztcclxuaW1wb3J0IHsgSUhhbmRsZXIsIElFdmVudHMsIElFdmVudCB9IGZyb20gJy4vZXZlbnQvcmVnaXN0cnknO1xyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIElNZXRhXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElNZXRhIHtcclxuICAgb3duZXI/OiBJbnN0YW5jZTtcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEluc3RhbmNlXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY2xhc3MgSW5zdGFuY2Uge1xyXG4gICBcclxuICAgXHJcbiAgIFtpbmRleDogbnVtYmVyXTogSFRNTEVsZW1lbnQ7XHJcblxyXG5cclxuICAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xyXG4gICBwdWJsaWMgZXZlbnRzOiBJRXZlbnRzO1xyXG4gICBwcml2YXRlIG1ldGE6IElNZXRhO1xyXG5cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBFbGVtZW50LCBtZXRhPzogSU1ldGEpIHtcclxuXHJcbiAgICAgIGxldCBlbHM6IGFueTtcclxuXHJcbiAgICAgIHRoaXMubWV0YSA9IG1ldGEgfHwge307XHJcbiAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnQucmVnaXN0cnkoKTtcclxuXHJcbiAgICAgIGlmKHR5cGVvZiBxcnkgPT09ICdzdHJpbmcnKSB7XHJcblxyXG4gICAgICAgICBlbHMgPSB1dGlsaXR5LnF1ZXJ5KHFyeSwgY3R4ID8gY3R4IDogZG9jdW1lbnQpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgIGVscyA9IHFyeTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghZWxzKSByZXR1cm4gdGhpc1xyXG5cclxuICAgICAgaWYgKGVscy5ub2RlVHlwZSA9PT0gMSB8fCBlbHMgPT09IHdpbmRvdykge1xyXG4gICAgICAgICBcclxuICAgICAgICAgdGhpc1swXSA9IGVscztcclxuICAgICAgICAgdGhpcy5sZW5ndGggPSAxXHJcbiAgICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgbGV0IGxlbiA9ICh0aGlzLmxlbmd0aCA9IGVscy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgdGhpc1tsZW5dID0gZWxzW2xlbl1cclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZmlyc3QoKSB7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IEluc3RhbmNlKHRoaXNbMF0pO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBmaW5kKHFyeTogc3RyaW5nKSB7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gbmV3IEluc3RhbmNlKHFyeSwgdGhpc1swXSwgeyBvd25lcjogdGhpcyB9KTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgY2xvc2VzdChxcnk6IHN0cmluZykge1xyXG5cclxuICAgICAgY29uc3QgbWF0Y2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHFyeSk7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgZWwgPSB0aGlzWzBdO1xyXG4gICAgICBsZXQgaTtcclxuICAgXHJcbiAgICAgIGRvIHtcclxuICAgXHJcbiAgICAgICAgIGkgPSBtYXRjaC5sZW5ndGg7XHJcbiAgIFxyXG4gICAgICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2guaXRlbShpKSAhPT0gZWwpIHt9O1xyXG4gICBcclxuICAgICAgfSB3aGlsZSAoXHJcbiAgIFxyXG4gICAgICAgICAoaSA8IDApICYmIChlbCA9IGVsLnBhcmVudEVsZW1lbnQpXHJcbiAgICAgICAgIFxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIG5ldyBJbnN0YW5jZShlbCk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGVhY2goY2I6IChlbDogSFRNTEVsZW1lbnQpID0+IHZvaWQpIHtcclxuXHJcbiAgICAgIGZvcihsZXQgaSA9IDAsIGxlbiA9IHRoaXMubGVuZ3RoOyBpIDwgbGVuOykge1xyXG4gICAgICAgICBcclxuICAgICAgICAgbGV0IGVsOiBIVE1MRWxlbWVudCA9IHRoaXNbaV07XHJcbiAgIFxyXG4gICAgICAgICBpZihjYi5jYWxsKHRoaXMsIHRoaXNbaV0sIGkrKykgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgIH1cclxuICAgXHJcbiAgICAgIH1cclxuICAgXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBjc3Mob2JqOiB7W2luZGV4OiBzdHJpbmddOiBzdHJpbmd9KSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBcclxuICAgICAgICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgIFxyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcclxuICAgXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsKTtcclxuICAgXHJcbiAgICAgICAgIH1cclxuICAgXHJcbiAgICAgIH0pO1xyXG4gICBcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGF0dHIob2JqOiB7W2luZGV4OiBzdHJpbmddOiBzdHJpbmd9IHwgc3RyaW5nKSB7XHJcblxyXG4gICAgICBpZih0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xyXG5cclxuICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzWzBdLmdldEF0dHJpYnV0ZShvYmopO1xyXG5cclxuICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGZvcihsZXQga2V5IG9mIE9iamVjdC5rZXlzKG9iaikpIHtcclxuICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IG9ialtrZXldO1xyXG4gICBcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsKTtcclxuICAgXHJcbiAgICAgICAgIH1cclxuICAgXHJcbiAgICAgIH0pO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBoYXNDbGFzcyhzdHI6IHN0cmluZykge1xyXG5cclxuICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgXHJcbiAgICAgICAgIHJlc3VsdCA9IHV0aWxpdHkuaGFzQ2xhc3MoZWwsIHN0cik7XHJcbiAgIFxyXG4gICAgICB9KTtcclxuICAgXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGFkZENsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgY29uc3Qgc3RhdGUgPSB1dGlsaXR5Lmhhc0NsYXNzKGVsLCBzdHIpO1xyXG5cclxuICAgICAgICAgaWYoIXN0YXRlKSB7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgc3RyO1xyXG4gICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBjb25zdCBzdGF0ZSA9IHV0aWxpdHkuaGFzQ2xhc3MoZWwsIHN0cik7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBpZihzdGF0ZSkge1xyXG4gICBcclxuICAgICAgICAgICAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIHN0ciArICcoXFxcXHN8JCknKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IHZhbC5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XHJcbiAgIFxyXG4gICAgICAgICB9XHJcbiAgIFxyXG4gICAgICB9KTtcclxuICAgXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyB0b2dnbGVDbGFzcyhzdHI6IHN0cmluZykge1xyXG5cclxuICAgICAgaWYodGhpcy5oYXNDbGFzcyhzdHIpKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKHN0cik7XHJcbiAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICBcclxuICAgICAgICAgdGhpcy5hZGRDbGFzcyhzdHIpO1xyXG4gICBcclxuICAgICAgfVxyXG4gICBcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIG9uKGV2OiBzdHJpbmcsIG9wMTogc3RyaW5nIHwgSUhhbmRsZXIsIG9wMj86IElIYW5kbGVyKSB7XHJcblxyXG4gICAgICBjb25zdCB7IGV2ZW50cyB9ID0gdGhpcztcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRpcmVjdCA9IHR5cGVvZiBvcDEgPT09ICdmdW5jdGlvbicgJiYgb3AyID09PSB1bmRlZmluZWQ7XHJcbiAgICAgIGNvbnN0IGRlbGVnYXRlID0gdHlwZW9mIG9wMSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIG9wMiA9PT0gJ2Z1bmN0aW9uJztcclxuICAgXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgIFxyXG4gICAgICAgICBsZXQgY2IgPSBudWxsO1xyXG4gICBcclxuICAgICAgICAgaWYoZGlyZWN0KSB7XHJcbiAgIFxyXG4gICAgICAgICAgICBjYiA9IGV2ZW50LmRpcmVjdChvcDEgYXMgSUhhbmRsZXIpO1xyXG4gICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgICAgaWYoZGVsZWdhdGUpIHtcclxuICAgXHJcbiAgICAgICAgICAgIGNiID0gZXZlbnQuZGVsZWdhdGUoZWwsIG9wMSBhcyBzdHJpbmcsIG9wMik7XHJcbiAgIFxyXG4gICAgICAgICB9XHJcbiAgIFxyXG4gICAgICAgICBpZihjYikge1xyXG4gICBcclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldiwgY2IsIHRydWUpO1xyXG4gICBcclxuICAgICAgICAgICAgZXZlbnRzLmFkZCh7XHJcbiAgICAgICAgICAgICAgIHR5cGU6IGV2LFxyXG4gICAgICAgICAgICAgICBoYW5kbGVyOiBjYlxyXG4gICAgICAgICAgICB9KTtcclxuICAgXHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgIFxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTRG9tLm9uOiBJbnZhbGlkIEFyZ3VtZW50cycpO1xyXG4gICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgb2ZmKGV2OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGNvbnN0IHsgZXZlbnRzIH0gPSB0aGlzOyBcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgIFxyXG4gICAgICAgICBjb25zdCBpdGVtczogSUV2ZW50W10gPSBldmVudHMuZmluZChldik7XHJcblxyXG4gICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBpZihpdGVtICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgXHJcbiAgICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXYsIGl0ZW0uaGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICB9KTtcclxuICAgXHJcbiAgICAgIH0pO1xyXG4gICBcclxuICAgICAgZXZlbnRzLnJlbW92ZShldik7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgdmFsKHZhbD86IHN0cmluZykge1xyXG5cclxuICAgICAgY29uc3QgZWwgPSB0aGlzWzBdIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICBpZihlbC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICByZXR1cm4gZWwudmFsdWU7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbC52YWx1ZSA9IHZhbDtcclxuXHJcbiAgICAgIHJldHVybiB2YWw7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIHRleHQodmFsPzogc3RyaW5nKSB7XHJcblxyXG4gICAgICBpZih2YWwgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICByZXR1cm4gdGhpc1swXS5pbm5lclRleHQ7XHJcbiAgIFxyXG4gICAgICB9XHJcbiAgIFxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBcclxuICAgICAgICAgZWwuaW5uZXJIVE1MID0gdmFsO1xyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdmFsO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBkYXRhKGtleTogc3RyaW5nLCB2YWw/OiBzdHJpbmcpIHtcclxuICAgICAgXHJcbiAgICAgIGlmKHZhbCA9PSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAgICAgIHJldHVybiB0aGlzWzBdLmdldEF0dHJpYnV0ZShgZGF0YS0ke2tleX1gKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYGRhdGEtJHtrZXl9YCwgdmFsKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgaHRtbCh2YWw/OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGlmKHZhbCA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIHJldHVybiB0aGlzWzBdLmlubmVySFRNTDtcclxuICAgXHJcbiAgICAgIH1cclxuICAgXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgIFxyXG4gICAgICAgICBlbC5pbm5lckhUTUwgPSB2YWw7XHJcbiAgIFxyXG4gICAgICB9KTtcclxuICAgXHJcbiAgICAgIHJldHVybiB2YWw7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGFwcGVuZChpdGVtOiBzdHJpbmcgfCBOb2RlIHwgSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBpZih0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcclxuICAgXHJcbiAgICAgICAgICAgIHJldHVybiBlbC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGl0ZW0pO1xyXG4gICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgIFxyXG4gICAgICB9KTtcclxuICAgXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBwcmVwZW5kKGl0ZW06IHN0cmluZyB8IE5vZGUgfCBIVE1MRWxlbWVudCkge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGlmKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xyXG4gICBcclxuICAgICAgICAgICAgcmV0dXJuIGVsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGl0ZW0pO1xyXG4gICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgICAgZWwuaW5zZXJ0QmVmb3JlKGl0ZW0sIGVsLmZpcnN0Q2hpbGQpO1xyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZW1wdHkoKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBcclxuICAgICAgICAgd2hpbGUgKGVsLmZpcnN0Q2hpbGQpIHtcclxuICAgXHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICBcclxuICAgICAgICAgfVxyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlKCkge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xyXG4gICBcclxuICAgICAgfSk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIHRvQXJyYXkoKSB7XHJcblxyXG4gICAgICBjb25zdCBhcnJheTogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG4gICAgICBcclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgXHJcbiAgICAgICAgIGFycmF5LnB1c2goZWwpO1xyXG4gICBcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcblxyXG4gICB9XHJcblxyXG4gICBcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIE5hbWVzcGFjZVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIFRTRG9tIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEluaXQge1xyXG4gICAgICAgIChxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBFbGVtZW50LCBtZXRhPzogSU1ldGEpOiBJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgT2JqZWN0IGV4dGVuZHMgSW5zdGFuY2Uge31cclxuXHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBDb25zdHJ1Y3RvclxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHFyeTogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIGN0eD86IEhUTUxFbGVtZW50KSA9PiBuZXcgSW5zdGFuY2UocXJ5LCBjdHgpOyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogaGFzQ2xhc3NcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIGhhc0NsYXNzKFxyXG4gICBlbDogSFRNTEVsZW1lbnQsXHJcbiAgIHN0cjogc3RyaW5nXHJcbikge1xyXG5cclxuICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgY29uc3QgdmFsdWUgPSBgICR7c3RyfSBgO1xyXG4gICBjb25zdCBjbGVhbiA9IGAgJHtlbC5jbGFzc05hbWV9IGAucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKTtcclxuXHJcbiAgIGlmKGNsZWFuLmluZGV4T2YodmFsdWUpID4gLTEpIHtcclxuXHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcblxyXG4gICB9XHJcblxyXG4gICByZXR1cm4gcmVzdWx0O1xyXG5cclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEV4cG9ydFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHsgaGFzQ2xhc3MgfTsiLCJleHBvcnQgKiBmcm9tICcuL3F1ZXJ5JztcclxuZXhwb3J0ICogZnJvbSAnLi9oYXNDbGFzcyc7IiwiXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBWYXJpYWJsZXNcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHJlZ2V4ID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC87XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogUXVlcnlcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIHF1ZXJ5KFxyXG4gICBxcnk6IHN0cmluZywgXHJcbiAgIGN0eDogRWxlbWVudCB8IERvY3VtZW50XHJcbikge1xyXG5cclxuICAgbGV0IHRlc3Q7XHJcbiAgIGxldCBtYXRjaDtcclxuXHJcbiAgIGlmICgodGVzdCA9IHJlZ2V4LmV4ZWMocXJ5KSkpIHtcclxuXHJcbiAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzNdKSkge1xyXG5cclxuICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG1hdGNoKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzJdKSkge1xyXG5cclxuICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZShtYXRjaCk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKG1hdGNoID0gdGVzdFsxXSkpIHtcclxuXHJcbiAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXRjaCk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICB9XHJcblxyXG4gICByZXR1cm4gY3R4LnF1ZXJ5U2VsZWN0b3JBbGwocXJ5KTtcclxuXHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBFeHBvcnRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCB7IHF1ZXJ5IH07Il19\n"]}