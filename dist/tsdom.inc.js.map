{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","index_1","delegate","scope","query","cb","ev","$elements","Instance","el","hit","each","_el","test","target","parentNode","../index","2","direct","currentTarget","3","registry_1","registry","direct_1","delegate_1","./delegate","./direct","./registry","4","Registry","list","prototype","find","filter","_ev","type","add","push","remove","5","default","./index","6","utility","event","qry","ctx","meta","els","events","document","nodeType","len","get","key","first","owner","closest","match","querySelectorAll","item","parentElement","css","obj","_i","_a","keys","val","style","setProperty","attr","getAttribute","setAttribute","hasClass","str","result","addClass","className","removeClass","reg","RegExp","replace","trim","toggleClass","on","op1","op2","undefined","addEventListener","handler","off","forEach","removeEventListener","text","innerText","innerHTML","data","html","append","insertAdjacentHTML","appendChild","prepend","insertBefore","firstChild","empty","removeChild","toArray","array","./event","./utility","7","indexOf","8","__export","m","hasOwnProperty","./hasClass","./query","9","regex","exec","getElementsByClassName","getElementsByTagName","getElementById"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar index_1 = require(\"../index\");\r\n/* -----------------------------------\r\n *\r\n * Delegate\r\n *\r\n * -------------------------------- */\r\nfunction delegate(scope, query, cb) {\r\n    return function (ev) {\r\n        var $elements = new index_1.Instance(query, scope);\r\n        var el = null;\r\n        var hit = false;\r\n        $elements.each(function (_el) {\r\n            var test = ev.target;\r\n            if (test === _el) {\r\n                hit = true;\r\n                el = test;\r\n                return;\r\n            }\r\n            while (test && test !== scope) {\r\n                test = test.parentNode;\r\n                if (test === _el) {\r\n                    hit = true;\r\n                    el = test;\r\n                }\r\n            }\r\n        });\r\n        if (hit) {\r\n            cb(ev, el);\r\n        }\r\n    };\r\n}\r\nexports.delegate = delegate;\r\n},{\"../index\":6}],2:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Direct\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction direct(cb) {\r\n    return function (ev) {\r\n        var el = ev.currentTarget;\r\n        cb(ev, el);\r\n    };\r\n}\r\nexports.direct = direct;\r\n},{}],3:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar registry_1 = require(\"./registry\");\r\nexports.registry = registry_1.registry;\r\nvar direct_1 = require(\"./direct\");\r\nexports.direct = direct_1.direct;\r\nvar delegate_1 = require(\"./delegate\");\r\nexports.delegate = delegate_1.delegate;\r\n},{\"./delegate\":1,\"./direct\":2,\"./registry\":4}],4:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * IEvents\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * Registry\r\n *\r\n * -------------------------------- */\r\nvar Registry = /** @class */ (function () {\r\n    function Registry() {\r\n        this.list = [];\r\n    }\r\n    Registry.prototype.find = function (ev) {\r\n        var list = this.list;\r\n        return list.filter(function (_ev) { return _ev.type === ev; });\r\n    };\r\n    Registry.prototype.add = function (ev) {\r\n        this.list.push(ev);\r\n    };\r\n    Registry.prototype.remove = function (ev) {\r\n        var list = this.list;\r\n        this.list = list.filter(function (_ev) { return _ev.type !== ev; });\r\n    };\r\n    return Registry;\r\n}());\r\nexports.Registry = Registry;\r\n/* -----------------------------------\r\n *\r\n * Function\r\n *\r\n * -------------------------------- */\r\nfunction registry() {\r\n    return new Registry();\r\n}\r\nexports.registry = registry;\r\n},{}],5:[function(require,module,exports){\nmodule.exports = require('./index').default;\n},{\"./index\":6}],6:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utility = require(\"./utility\");\r\nvar event = require(\"./event\");\r\n/* -----------------------------------\r\n *\r\n * Instance\r\n *\r\n * -------------------------------- */\r\nvar Instance = /** @class */ (function () {\r\n    function Instance(qry, ctx, meta) {\r\n        var els;\r\n        this.meta = meta || {};\r\n        this.events = event.registry();\r\n        if (typeof qry === 'string') {\r\n            els = utility.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    Instance.prototype.get = function (key) {\r\n        return this[key];\r\n    };\r\n    Instance.prototype.first = function () {\r\n        return new Instance(this[0]);\r\n    };\r\n    Instance.prototype.find = function (qry) {\r\n        return new Instance(qry, this[0], { owner: this });\r\n    };\r\n    Instance.prototype.closest = function (qry) {\r\n        var match = document.querySelectorAll(qry);\r\n        var el = this[0];\r\n        var i;\r\n        do {\r\n            i = match.length;\r\n            while (--i >= 0 && match.item(i) !== el) {\r\n                // noop\r\n            }\r\n        } while (i < 0 && (el = el.parentElement));\r\n        return new Instance(el);\r\n    };\r\n    Instance.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            if (cb.call(this, this[i], i++) === false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Instance.prototype.css = function (obj) {\r\n        this.each(function (el) {\r\n            for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.attr = function (obj) {\r\n        if (typeof obj === 'string') {\r\n            var value = this[0].getAttribute(obj);\r\n            return value;\r\n        }\r\n        this.each(function (el) {\r\n            for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var val = obj[key];\r\n                el.setAttribute(key, val);\r\n            }\r\n        });\r\n    };\r\n    Instance.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            result = utility.hasClass(el, str);\r\n        });\r\n        return result;\r\n    };\r\n    Instance.prototype.addClass = function (str) {\r\n        this.each(function (el) {\r\n            var state = utility.hasClass(el, str);\r\n            if (!state) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.removeClass = function (str) {\r\n        this.each(function (el) {\r\n            var state = utility.hasClass(el, str);\r\n            if (state) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                var val = el.className.replace(reg, ' ').trim();\r\n                el.className = val.replace(/\\s{2,}/g, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.toggleClass = function (str) {\r\n        if (this.hasClass(str)) {\r\n            this.removeClass(str);\r\n        }\r\n        else {\r\n            this.addClass(str);\r\n        }\r\n        return this;\r\n    };\r\n    Instance.prototype.on = function (ev, op1, op2) {\r\n        var events = this.events;\r\n        var direct = typeof op1 === 'function' && op2 === undefined;\r\n        var delegate = typeof op1 === 'string' && typeof op2 === 'function';\r\n        this.each(function (el) {\r\n            var cb = null;\r\n            if (direct) {\r\n                cb = event.direct(op1);\r\n            }\r\n            if (delegate) {\r\n                cb = event.delegate(el, op1, op2);\r\n            }\r\n            if (cb) {\r\n                el.addEventListener(ev, cb, true);\r\n                events.add({\r\n                    type: ev,\r\n                    handler: cb,\r\n                });\r\n            }\r\n            else {\r\n                throw new Error('TSDom.on: Invalid Arguments');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.off = function (ev) {\r\n        var events = this.events;\r\n        this.each(function (el) {\r\n            var items = events.find(ev);\r\n            items.forEach(function (item) {\r\n                if (item !== undefined) {\r\n                    el.removeEventListener(ev, item.handler, true);\r\n                }\r\n            });\r\n        });\r\n        events.remove(ev);\r\n        return this;\r\n    };\r\n    Instance.prototype.val = function (val) {\r\n        var item = this.get(0);\r\n        if (item.value === undefined) {\r\n            return null;\r\n        }\r\n        if (val === undefined) {\r\n            return item.value;\r\n        }\r\n        item.value = val;\r\n        return val;\r\n    };\r\n    Instance.prototype.text = function (val) {\r\n        var item = this.get(0);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        if (val === undefined) {\r\n            return item.innerText;\r\n        }\r\n        this.each(function (el) {\r\n            el.innerHTML = val;\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.data = function (key, val) {\r\n        var item = this.get(0);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        if (val === undefined) {\r\n            return item.getAttribute(\"data-\" + key);\r\n        }\r\n        this.each(function (el) {\r\n            el.setAttribute(\"data-\" + key, val);\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.html = function (val) {\r\n        var item = this.get(0);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        if (val === undefined) {\r\n            return item.innerHTML;\r\n        }\r\n        this.each(function (el) {\r\n            el.innerHTML = val;\r\n        });\r\n        return val;\r\n    };\r\n    Instance.prototype.append = function (item) {\r\n        this.each(function (el) {\r\n            if (typeof item === 'string') {\r\n                return el.insertAdjacentHTML('beforeend', item);\r\n            }\r\n            el.appendChild(item);\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.prepend = function (item) {\r\n        this.each(function (el) {\r\n            if (typeof item === 'string') {\r\n                return el.insertAdjacentHTML('afterbegin', item);\r\n            }\r\n            el.insertBefore(item, el.firstChild);\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.empty = function () {\r\n        this.each(function (el) {\r\n            while (el.firstChild) {\r\n                el.removeChild(el.firstChild);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    Instance.prototype.remove = function () {\r\n        this.each(function (el) {\r\n            el.parentNode.removeChild(el);\r\n        });\r\n    };\r\n    Instance.prototype.toArray = function () {\r\n        var array = [];\r\n        this.each(function (el) {\r\n            array.push(el);\r\n        });\r\n        return array;\r\n    };\r\n    return Instance;\r\n}());\r\nexports.Instance = Instance;\r\n/* -----------------------------------\r\n *\r\n * Constructor\r\n *\r\n * -------------------------------- */\r\nexports.default = (function (qry, ctx) {\r\n    return new Instance(qry, ctx);\r\n});\r\n},{\"./event\":3,\"./utility\":8}],7:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * hasClass\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction hasClass(el, str) {\r\n    var result = false;\r\n    var value = \" \" + str + \" \";\r\n    var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n    if (clean.indexOf(value) > -1) {\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\nexports.hasClass = hasClass;\r\n},{}],8:[function(require,module,exports){\n\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./query\"));\r\n__export(require(\"./hasClass\"));\r\n},{\"./hasClass\":7,\"./query\":9}],9:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Variables\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n/* -----------------------------------\r\n *\r\n * Query\r\n *\r\n * -------------------------------- */\r\nfunction query(qry, ctx) {\r\n    var test;\r\n    var match;\r\n    if ((test = regex.exec(qry))) {\r\n        if ((match = test[3])) {\r\n            return ctx.getElementsByClassName(match);\r\n        }\r\n        if ((match = test[2])) {\r\n            return ctx.getElementsByTagName(match);\r\n        }\r\n        if ((match = test[1])) {\r\n            return document.getElementById(match);\r\n        }\r\n    }\r\n    return ctx.querySelectorAll(qry);\r\n}\r\nexports.query = query;\r\n},{}]},{},[5])(5)\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXZlbnQvZGVsZWdhdGUudHMiLCJzcmMvZXZlbnQvZGlyZWN0LnRzIiwic3JjL2V2ZW50L2luZGV4LnRzIiwic3JjL2V2ZW50L3JlZ2lzdHJ5LnRzIiwic3JjL2luY2x1ZGUuanMiLCJzcmMvaW5kZXgudHMiLCJzcmMvdXRpbGl0eS9oYXNDbGFzcy50cyIsInNyYy91dGlsaXR5L2luZGV4LnRzIiwic3JjL3V0aWxpdHkvcXVlcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLGtDQUFvQztBQUVwQzs7OztzQ0FJc0M7QUFFdEMsU0FBUyxRQUFRLENBQ2QsS0FBa0IsRUFDbEIsS0FBYSxFQUNiLEVBQXdDO0lBRXhDLE9BQU8sVUFBQyxFQUFTO1FBQ2QsSUFBTSxTQUFTLEdBQUcsSUFBSSxnQkFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUU3QyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDZCxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUM7UUFFaEIsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFBLEdBQUc7WUFDZixJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsTUFBYSxDQUFDO1lBRTVCLElBQUksSUFBSSxLQUFLLEdBQUcsRUFBRTtnQkFDZixHQUFHLEdBQUcsSUFBSSxDQUFDO2dCQUNYLEVBQUUsR0FBRyxJQUFJLENBQUM7Z0JBRVYsT0FBTzthQUNUO1lBRUQsT0FBTyxJQUFJLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRTtnQkFDNUIsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBRXZCLElBQUksSUFBSSxLQUFLLEdBQUcsRUFBRTtvQkFDZixHQUFHLEdBQUcsSUFBSSxDQUFDO29CQUNYLEVBQUUsR0FBRyxJQUFJLENBQUM7aUJBQ1o7YUFDSDtRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxHQUFHLEVBQUU7WUFD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QUMsQ0FBQztTQUN6QztRQUVELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDcEIsT0FBTyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3hDO0tBQ0g7SUFFRCxPQUFPLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwQyxDQUFDO0FBUVEsc0JBQUsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBJbnN0YW5jZSB9IGZyb20gJy4uL2luZGV4JztcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIERlbGVnYXRlXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5mdW5jdGlvbiBkZWxlZ2F0ZShcclxuICAgc2NvcGU6IEhUTUxFbGVtZW50LFxyXG4gICBxdWVyeTogc3RyaW5nLFxyXG4gICBjYjogKGV2OiBFdmVudCwgZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkXHJcbikge1xyXG4gICByZXR1cm4gKGV2OiBFdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCAkZWxlbWVudHMgPSBuZXcgSW5zdGFuY2UocXVlcnksIHNjb3BlKTtcclxuXHJcbiAgICAgIGxldCBlbCA9IG51bGw7XHJcbiAgICAgIGxldCBoaXQgPSBmYWxzZTtcclxuXHJcbiAgICAgICRlbGVtZW50cy5lYWNoKF9lbCA9PiB7XHJcbiAgICAgICAgIGxldCB0ZXN0ID0gZXYudGFyZ2V0IGFzIGFueTtcclxuXHJcbiAgICAgICAgIGlmICh0ZXN0ID09PSBfZWwpIHtcclxuICAgICAgICAgICAgaGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWwgPSB0ZXN0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB3aGlsZSAodGVzdCAmJiB0ZXN0ICE9PSBzY29wZSkge1xyXG4gICAgICAgICAgICB0ZXN0ID0gdGVzdC5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRlc3QgPT09IF9lbCkge1xyXG4gICAgICAgICAgICAgICBoaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICBlbCA9IHRlc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChoaXQpIHtcclxuICAgICAgICAgY2IoZXYsIGVsKTtcclxuICAgICAgfVxyXG4gICB9O1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBFeHBvcnRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCB7IGRlbGVnYXRlIH07XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIERpcmVjdFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gZGlyZWN0KGNiOiAoZXY6IEV2ZW50LCBlbDogSFRNTEVsZW1lbnQpID0+IHZvaWQpIHtcclxuICAgcmV0dXJuIChldjogRXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgZWwgPSBldi5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgY2IoZXYsIGVsKTtcclxuICAgfTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgeyBkaXJlY3QgfTtcclxuIiwiaW1wb3J0IHsgcmVnaXN0cnkgfSBmcm9tICcuL3JlZ2lzdHJ5JztcclxuaW1wb3J0IHsgZGlyZWN0IH0gZnJvbSAnLi9kaXJlY3QnO1xyXG5pbXBvcnQgeyBkZWxlZ2F0ZSB9IGZyb20gJy4vZGVsZWdhdGUnO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXZlbnRzXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgeyByZWdpc3RyeSwgZGlyZWN0LCBkZWxlZ2F0ZSB9O1xyXG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJRXZlbnRzXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgdHlwZSBJRXZlbnRzID0gUmVnaXN0cnk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJRXZlbnRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50IHtcclxuICAgdHlwZTogc3RyaW5nO1xyXG4gICBoYW5kbGVyOiBFdmVudExpc3RlbmVyO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJSGFuZGxlclxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHR5cGUgSUhhbmRsZXIgPSAoZXY6IEV2ZW50LCBlbDogSFRNTEVsZW1lbnQpID0+IHZvaWQ7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBSZWdpc3RyeVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlZ2lzdHJ5IHtcclxuICAgcHJpdmF0ZSBsaXN0OiBJRXZlbnRbXTtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgdGhpcy5saXN0ID0gW107XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBmaW5kKGV2OiBzdHJpbmcpIHtcclxuICAgICAgY29uc3QgeyBsaXN0IH0gPSB0aGlzO1xyXG5cclxuICAgICAgcmV0dXJuIGxpc3QuZmlsdGVyKF9ldiA9PiBfZXYudHlwZSA9PT0gZXYpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkKGV2OiBJRXZlbnQpIHtcclxuICAgICAgdGhpcy5saXN0LnB1c2goZXYpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlKGV2OiBzdHJpbmcpIHtcclxuICAgICAgY29uc3QgeyBsaXN0IH0gPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5saXN0ID0gbGlzdC5maWx0ZXIoX2V2ID0+IF9ldi50eXBlICE9PSBldik7XHJcbiAgIH1cclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRnVuY3Rpb25cclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdHJ5KCkge1xyXG4gICByZXR1cm4gbmV3IFJlZ2lzdHJ5KCk7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEV4cG9ydFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHsgcmVnaXN0cnkgfTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2luZGV4JykuZGVmYXVsdDsiLCJpbXBvcnQgKiBhcyB1dGlsaXR5IGZyb20gJy4vdXRpbGl0eSc7XHJcbmltcG9ydCAqIGFzIGV2ZW50IGZyb20gJy4vZXZlbnQnO1xyXG5pbXBvcnQgeyBJSGFuZGxlciwgSUV2ZW50cywgSUV2ZW50IH0gZnJvbSAnLi9ldmVudC9yZWdpc3RyeSc7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBJTWV0YVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTWV0YSB7XHJcbiAgIG93bmVyPzogSW5zdGFuY2U7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEluc3RhbmNlXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY2xhc3MgSW5zdGFuY2Uge1xyXG4gICBbaW5kZXg6IG51bWJlcl06IEhUTUxFbGVtZW50O1xyXG5cclxuICAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xyXG4gICBwdWJsaWMgZXZlbnRzOiBJRXZlbnRzO1xyXG4gICBwcml2YXRlIG1ldGE6IElNZXRhO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHFyeTogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIGN0eD86IEVsZW1lbnQsIG1ldGE/OiBJTWV0YSkge1xyXG4gICAgICBsZXQgZWxzOiBhbnk7XHJcblxyXG4gICAgICB0aGlzLm1ldGEgPSBtZXRhIHx8IHt9O1xyXG4gICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50LnJlZ2lzdHJ5KCk7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIHFyeSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgZWxzID0gdXRpbGl0eS5xdWVyeShxcnksIGN0eCA/IGN0eCA6IGRvY3VtZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgZWxzID0gcXJ5O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWVscykgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgICBpZiAoZWxzLm5vZGVUeXBlID09PSAxIHx8IGVscyA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgIHRoaXNbMF0gPSBlbHM7XHJcbiAgICAgICAgIHRoaXMubGVuZ3RoID0gMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgbGV0IGxlbiA9ICh0aGlzLmxlbmd0aCA9IGVscy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgdGhpc1tsZW5dID0gZWxzW2xlbl1cclxuICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0KGtleTogbnVtYmVyKSB7XHJcbiAgICAgIHJldHVybiB0aGlzW2tleV07XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBmaXJzdCgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBJbnN0YW5jZSh0aGlzWzBdKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGZpbmQocXJ5OiBzdHJpbmcpIHtcclxuICAgICAgcmV0dXJuIG5ldyBJbnN0YW5jZShxcnksIHRoaXNbMF0sIHsgb3duZXI6IHRoaXMgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjbG9zZXN0KHFyeTogc3RyaW5nKSB7XHJcbiAgICAgIGNvbnN0IG1hdGNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxcnkpO1xyXG5cclxuICAgICAgbGV0IGVsID0gdGhpc1swXTtcclxuICAgICAgbGV0IGk7XHJcblxyXG4gICAgICBkbyB7XHJcbiAgICAgICAgIGkgPSBtYXRjaC5sZW5ndGg7XHJcblxyXG4gICAgICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2guaXRlbShpKSAhPT0gZWwpIHtcclxuICAgICAgICAgICAgLy8gbm9vcFxyXG4gICAgICAgICB9XHJcbiAgICAgIH0gd2hpbGUgKGkgPCAwICYmIChlbCA9IGVsLnBhcmVudEVsZW1lbnQpKTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgSW5zdGFuY2UoZWwpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZWFjaChjYjogKGVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5sZW5ndGg7IGkgPCBsZW47ICkge1xyXG4gICAgICAgICBpZiAoY2IuY2FsbCh0aGlzLCB0aGlzW2ldLCBpKyspID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNzcyhvYmo6IHsgW2luZGV4OiBzdHJpbmddOiBzdHJpbmcgfSkge1xyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmopKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IG9ialtrZXldO1xyXG5cclxuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWwpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhdHRyKG9iajogeyBbaW5kZXg6IHN0cmluZ106IHN0cmluZyB9IHwgc3RyaW5nKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXNbMF0uZ2V0QXR0cmlidXRlKG9iaik7XHJcblxyXG4gICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iaikpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gb2JqW2tleV07XHJcblxyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWwpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgaGFzQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgcmVzdWx0ID0gdXRpbGl0eS5oYXNDbGFzcyhlbCwgc3RyKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgY29uc3Qgc3RhdGUgPSB1dGlsaXR5Lmhhc0NsYXNzKGVsLCBzdHIpO1xyXG5cclxuICAgICAgICAgaWYgKCFzdGF0ZSkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgc3RyO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZW1vdmVDbGFzcyhzdHI6IHN0cmluZykge1xyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBjb25zdCBzdGF0ZSA9IHV0aWxpdHkuaGFzQ2xhc3MoZWwsIHN0cik7XHJcblxyXG4gICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIHN0ciArICcoXFxcXHN8JCknKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IHZhbC5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIHRvZ2dsZUNsYXNzKHN0cjogc3RyaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc0NsYXNzKHN0cikpIHtcclxuICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhzdHIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICB0aGlzLmFkZENsYXNzKHN0cik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgb24oZXY6IHN0cmluZywgb3AxOiBzdHJpbmcgfCBJSGFuZGxlciwgb3AyPzogSUhhbmRsZXIpIHtcclxuICAgICAgY29uc3QgeyBldmVudHMgfSA9IHRoaXM7XHJcblxyXG4gICAgICBjb25zdCBkaXJlY3QgPSB0eXBlb2Ygb3AxID09PSAnZnVuY3Rpb24nICYmIG9wMiA9PT0gdW5kZWZpbmVkO1xyXG4gICAgICBjb25zdCBkZWxlZ2F0ZSA9IHR5cGVvZiBvcDEgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBvcDIgPT09ICdmdW5jdGlvbic7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBsZXQgY2IgPSBudWxsO1xyXG5cclxuICAgICAgICAgaWYgKGRpcmVjdCkge1xyXG4gICAgICAgICAgICBjYiA9IGV2ZW50LmRpcmVjdChvcDEgYXMgSUhhbmRsZXIpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoZGVsZWdhdGUpIHtcclxuICAgICAgICAgICAgY2IgPSBldmVudC5kZWxlZ2F0ZShlbCwgb3AxIGFzIHN0cmluZywgb3AyKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKGNiKSB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXYsIGNiLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50cy5hZGQoe1xyXG4gICAgICAgICAgICAgICB0eXBlOiBldixcclxuICAgICAgICAgICAgICAgaGFuZGxlcjogY2IsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTRG9tLm9uOiBJbnZhbGlkIEFyZ3VtZW50cycpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBvZmYoZXY6IHN0cmluZykge1xyXG4gICAgICBjb25zdCB7IGV2ZW50cyB9ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIGNvbnN0IGl0ZW1zOiBJRXZlbnRbXSA9IGV2ZW50cy5maW5kKGV2KTtcclxuXHJcbiAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgaXRlbS5oYW5kbGVyLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBldmVudHMucmVtb3ZlKGV2KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdmFsKHZhbD86IHN0cmluZykge1xyXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5nZXQoMCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXRlbS52YWx1ZSA9IHZhbDtcclxuXHJcbiAgICAgIHJldHVybiB2YWw7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyB0ZXh0KHZhbD86IHN0cmluZykge1xyXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5nZXQoMCk7XHJcblxyXG4gICAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICByZXR1cm4gaXRlbS5pbm5lclRleHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIGVsLmlubmVySFRNTCA9IHZhbDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdmFsO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZGF0YShrZXk6IHN0cmluZywgdmFsPzogc3RyaW5nKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdldCgwKTtcclxuXHJcbiAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIHJldHVybiBpdGVtLmdldEF0dHJpYnV0ZShgZGF0YS0ke2tleX1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGBkYXRhLSR7a2V5fWAsIHZhbCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHZhbDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGh0bWwodmFsPzogc3RyaW5nKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdldCgwKTtcclxuXHJcbiAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIHJldHVybiBpdGVtLmlubmVySFRNTDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgZWwuaW5uZXJIVE1MID0gdmFsO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB2YWw7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhcHBlbmQoaXRlbTogc3RyaW5nIHwgTm9kZSB8IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcbiAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaXRlbSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGVsLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcHJlcGVuZChpdGVtOiBzdHJpbmcgfCBOb2RlIHwgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgaXRlbSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGVsLmluc2VydEJlZm9yZShpdGVtLCBlbC5maXJzdENoaWxkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGVtcHR5KCkge1xyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlKCkge1xyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG4gICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyB0b0FycmF5KCkge1xyXG4gICAgICBjb25zdCBhcnJheTogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuICAgICAgICAgYXJyYXkucHVzaChlbCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICB9XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIE5hbWVzcGFjZVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIFRTRG9tIHtcclxuICAgZXhwb3J0IHR5cGUgSW5pdCA9IChcclxuICAgICAgcXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcclxuICAgICAgY3R4PzogRWxlbWVudCxcclxuICAgICAgbWV0YT86IElNZXRhXHJcbiAgICkgPT4gSW5zdGFuY2U7XHJcblxyXG4gICBleHBvcnQgY2xhc3MgT2JqZWN0IGV4dGVuZHMgSW5zdGFuY2Uge31cclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogQ29uc3RydWN0b3JcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IChxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBIVE1MRWxlbWVudCkgPT5cclxuICAgbmV3IEluc3RhbmNlKHFyeSwgY3R4KTtcclxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogaGFzQ2xhc3NcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmZ1bmN0aW9uIGhhc0NsYXNzKGVsOiBIVE1MRWxlbWVudCwgc3RyOiBzdHJpbmcpIHtcclxuICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgY29uc3QgdmFsdWUgPSBgICR7c3RyfSBgO1xyXG4gICBjb25zdCBjbGVhbiA9IGAgJHtlbC5jbGFzc05hbWV9IGAucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKTtcclxuXHJcbiAgIGlmIChjbGVhbi5pbmRleE9mKHZhbHVlKSA+IC0xKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEV4cG9ydFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHsgaGFzQ2xhc3MgfTtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9xdWVyeSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vaGFzQ2xhc3MnO1xyXG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBWYXJpYWJsZXNcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHJlZ2V4ID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC87XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBRdWVyeVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gcXVlcnkocXJ5OiBzdHJpbmcsIGN0eDogRWxlbWVudCB8IERvY3VtZW50KSB7XHJcbiAgIGxldCB0ZXN0O1xyXG4gICBsZXQgbWF0Y2g7XHJcblxyXG4gICBpZiAoKHRlc3QgPSByZWdleC5leGVjKHFyeSkpKSB7XHJcbiAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzNdKSkge1xyXG4gICAgICAgICByZXR1cm4gY3R4LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobWF0Y2gpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKG1hdGNoID0gdGVzdFsyXSkpIHtcclxuICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZShtYXRjaCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzFdKSkge1xyXG4gICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF0Y2gpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHJldHVybiBjdHgucXVlcnlTZWxlY3RvckFsbChxcnkpO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBFeHBvcnRcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCB7IHF1ZXJ5IH07XHJcbiJdfQ==\n"]}