{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","./index","2","Object","defineProperty","value","TSDomObject","qry","ctx","meta","els","document","regex","events","query","nodeType","len","prototype","find","owner","closest","match","querySelectorAll","el","item","parentElement","each","cb","css","obj","key","val","style","setProperty","attr","setAttribute","hasClass","str","result","className","replace","indexOf","addClass","_this","removeClass","reg","RegExp","toggleClass","on","ev","op1","op2","direct","undefined","delegate","off","delegateEvent","addEventListener","push","type","handler","active","findEvent","removeEventListener","filter","evt","event","html","innerHTML","append","insertAdjacentHTML","prepend","test","doc","exec","getElementsByClassName","getElementsByTagName","getElementById","_ev","hit","_el","target","preventDefault","returnValue"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = require('./index').default;\n},{\"./index\":2}],2:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Default\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * TSDom\r\n *\r\n * -------------------------------- */\r\nvar TSDomObject = (function () {\r\n    function TSDomObject(qry, ctx, meta) {\r\n        var els;\r\n        this.document = document;\r\n        this.meta = meta || {};\r\n        this.regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n        this.events = [];\r\n        if (typeof qry === 'string') {\r\n            els = this.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    TSDomObject.prototype.find = function (qry) {\r\n        return new TSDomObject(qry, this[0], { owner: this });\r\n    };\r\n    TSDomObject.prototype.closest = function (qry) {\r\n        var doc = this.document;\r\n        var match = doc.querySelectorAll(qry);\r\n        var el = this[0];\r\n        var i;\r\n        do {\r\n            i = match.length;\r\n            while (--i >= 0 && match.item(i) !== el) { }\r\n            ;\r\n        } while ((i < 0) && (el = el.parentElement));\r\n        return new TSDomObject(el);\r\n    };\r\n    TSDomObject.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.css = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.attr = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.setAttribute(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            var value = \" \" + str + \" \";\r\n            var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n            if (clean.indexOf(value) > -1) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    TSDomObject.prototype.addClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (!_this.hasClass(str)) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.removeClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (_this.hasClass(str)) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                el.className = el.className.replace(reg, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.toggleClass = function (str) {\r\n        if (this.hasClass(str)) {\r\n            this.removeClass(str);\r\n        }\r\n        else {\r\n            this.addClass(str);\r\n        }\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.on = function (ev, op1, op2) {\r\n        var self = this;\r\n        var direct = typeof op1 === 'function' && op2 === undefined;\r\n        var delegate = typeof op1 === 'string' && typeof op2 === 'function';\r\n        this.off(ev);\r\n        this.each(function (el) {\r\n            var cb = null;\r\n            if (direct) {\r\n                cb = op1;\r\n            }\r\n            if (delegate) {\r\n                cb = self.delegateEvent(el, op1, op2);\r\n            }\r\n            if (cb) {\r\n                el.addEventListener(ev, cb, false);\r\n                self.events.push({\r\n                    type: ev,\r\n                    handler: cb\r\n                });\r\n            }\r\n            else {\r\n                throw new Error('TSDom.on: Invalid Arguments');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.off = function (ev) {\r\n        var _this = this;\r\n        var self = this;\r\n        var events = this.events;\r\n        this.each(function (el) {\r\n            var active = _this.findEvent(ev);\r\n            if (active !== undefined) {\r\n                el.removeEventListener(ev, active.handler, false);\r\n            }\r\n        });\r\n        this.events = events.filter(function (evt) {\r\n            return (evt.type !== ev);\r\n        }, event);\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.html = function (val) {\r\n        var el = this[0];\r\n        if (!val) {\r\n            return el.innerHTML;\r\n        }\r\n        el.innerHTML = val;\r\n        return val;\r\n    };\r\n    TSDomObject.prototype.append = function (html) {\r\n        this.each(function (el) {\r\n            el.insertAdjacentHTML('beforeend', html);\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.prepend = function (html) {\r\n        this.each(function (el) {\r\n            el.insertAdjacentHTML('afterbegin', html);\r\n        });\r\n        return this;\r\n    };\r\n    TSDomObject.prototype.query = function (qry, ctx) {\r\n        var doc = this.document;\r\n        var test;\r\n        var match;\r\n        if ((test = this.regex.exec(qry))) {\r\n            if ((match = test[3])) {\r\n                return ctx.getElementsByClassName(match);\r\n            }\r\n            if ((match = test[2])) {\r\n                return ctx.getElementsByTagName(match);\r\n            }\r\n            if ((match = test[1])) {\r\n                return doc.getElementById(match);\r\n            }\r\n        }\r\n        return ctx.querySelectorAll(qry);\r\n    };\r\n    TSDomObject.prototype.findEvent = function (ev) {\r\n        var events = this.events;\r\n        return events.filter(function (_ev) {\r\n            return (_ev.type === ev);\r\n        }, ev)[0];\r\n    };\r\n    TSDomObject.prototype.delegateEvent = function (el, qry, cb) {\r\n        return function (ev) {\r\n            var hit = false;\r\n            var els = new TSDomObject(qry, el);\r\n            els.each(function (_el) {\r\n                if (ev.target == _el) {\r\n                    hit = true;\r\n                }\r\n            });\r\n            if (hit)\r\n                cb(ev);\r\n        };\r\n    };\r\n    return TSDomObject;\r\n}());\r\nexports.TSDomObject = TSDomObject;\r\n/* -----------------------------------\r\n *\r\n * preventDefault\r\n *\r\n * -------------------------------- */\r\nfunction preventDefault(ev) {\r\n    if (ev.preventDefault) {\r\n        return ev.preventDefault();\r\n    }\r\n    return ev.returnValue = false;\r\n}\r\nexports.preventDefault = preventDefault;\r\n/* -----------------------------------\r\n *\r\n * Export\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) {\r\n    return new TSDomObject(qry, ctx);\r\n};\r\n},{}]},{},[1])(1)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5jbHVkZS5qcyIsInNyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7QUNFQTs7OztzQ0FJc0M7O0FBOEJ0Qzs7OztzQ0FJc0M7QUFFdEM7SUFhRyxxQkFBbUIsR0FBeUIsRUFBRSxHQUFhLEVBQUUsSUFBZ0I7UUFFMUUsSUFBSSxHQUFRLENBQUM7UUFFYixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxrQ0FBa0MsQ0FBQztRQUNoRCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUVqQixFQUFFLENBQUEsQ0FBQyxPQUFPLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBRTFCLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBRS9DLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUVMLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFFYixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFBQyxNQUFNLENBQUMsSUFBSSxDQUFBO1FBRXJCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBRXhDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQTtRQUVsQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFFTCxHQUFHLENBQUMsQ0FDRCxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FB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QztBQUFELENBN1lBLEFBNllDLElBQUE7QUE3WVksa0NBQVc7QUFnWnhCOzs7O3NDQUlzQztBQUV0Qyx3QkFBK0IsRUFBUztJQUVyQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUVyQixNQUFNLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRTlCLENBQUM7SUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFFakMsQ0FBQztBQVZELHdDQVVDO0FBR0Q7Ozs7c0NBSXNDO0FBRXRDLGtCQUFlLFVBQUMsR0FBeUIsRUFBRSxHQUFpQjtJQUV6RCxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRXBDLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaW5kZXgnKS5kZWZhdWx0OyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRGVmYXVsdFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUU0RvbSB7XHJcbiAgIChxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBFbGVtZW50LCBtZXRhPzogVFNEb21NZXRhKTogVFNEb21PYmplY3RcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIE1ldGFcclxuICpcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVFNEb21NZXRhIHtcclxuICAgb3duZXI/OiBUU0RvbU9iamVjdDtcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEV2ZW50c1xyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUU0RvbUV2ZW50cyB7XHJcbiAgIHR5cGU6IHN0cmluZztcclxuICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcjtcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIFRTRG9tXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY2xhc3MgVFNEb21PYmplY3Qge1xyXG5cclxuXHJcbiAgIFtpbmRleDogbnVtYmVyXTogSFRNTEVsZW1lbnQ7XHJcblxyXG5cclxuICAgZG9jdW1lbnQ6IERvY3VtZW50O1xyXG4gICBtZXRhOiBUU0RvbU1ldGE7XHJcbiAgIHJlZ2V4OiBSZWdFeHA7XHJcbiAgIGxlbmd0aDogbnVtYmVyO1xyXG4gICBldmVudHM6IFRTRG9tRXZlbnRzW107XHJcblxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHFyeTogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIGN0eD86IEVsZW1lbnQsIG1ldGE/OiBUU0RvbU1ldGEpIHtcclxuXHJcbiAgICAgIGxldCBlbHM6IGFueTtcclxuXHJcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgdGhpcy5tZXRhID0gbWV0YSB8fCB7fTtcclxuICAgICAgdGhpcy5yZWdleCA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvO1xyXG4gICAgICB0aGlzLmV2ZW50cyA9IFtdO1xyXG5cclxuICAgICAgaWYodHlwZW9mIHFyeSA9PT0gJ3N0cmluZycpIHtcclxuXHJcbiAgICAgICAgIGVscyA9IHRoaXMucXVlcnkocXJ5LCBjdHggPyBjdHggOiBkb2N1bWVudCk7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgZWxzID0gcXJ5O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFlbHMpIHJldHVybiB0aGlzXHJcblxyXG4gICAgICBpZiAoZWxzLm5vZGVUeXBlID09PSAxIHx8IGVscyA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICB0aGlzWzBdID0gZWxzO1xyXG4gICAgICAgICB0aGlzLmxlbmd0aCA9IDFcclxuICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgbGV0IGxlbiA9ICh0aGlzLmxlbmd0aCA9IGVscy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgdGhpc1tsZW5dID0gZWxzW2xlbl1cclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZmluZCAocXJ5OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgVFNEb21PYmplY3QocXJ5LCB0aGlzWzBdLCB7IG93bmVyOiB0aGlzIH0pO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBjbG9zZXN0KHFyeTogc3RyaW5nKSB7XHJcblxyXG4gICAgICBjb25zdCBkb2MgPSB0aGlzLmRvY3VtZW50O1xyXG4gICAgICBjb25zdCBtYXRjaCA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKHFyeSk7XHJcblxyXG4gICAgICBsZXQgZWwgPSB0aGlzWzBdO1xyXG4gICAgICBsZXQgaTtcclxuXHJcbiAgICAgIGRvIHtcclxuXHJcbiAgICAgICAgIGkgPSBtYXRjaC5sZW5ndGg7XHJcblxyXG4gICAgICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2guaXRlbShpKSAhPT0gZWwpIHt9O1xyXG5cclxuICAgICAgfSB3aGlsZSAoXHJcblxyXG4gICAgICAgICAoaSA8IDApICYmIChlbCA9IGVsLnBhcmVudEVsZW1lbnQpXHJcbiAgICAgICAgIFxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIG5ldyBUU0RvbU9iamVjdChlbCk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGVhY2ggKGNiOiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkKSB7XHJcblxyXG4gICAgICBmb3IobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aDsgaSA8IGxlbjspIHtcclxuXHJcbiAgICAgICAgIGxldCBlbDogSFRNTEVsZW1lbnQgPSB0aGlzW2ldO1xyXG5cclxuICAgICAgICAgaWYoY2IuY2FsbCh0aGlzLCB0aGlzW2ldLCBpKyspID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgY3NzKG9iajogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xyXG5cclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGF0dHIob2JqOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcblxyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBmb3IobGV0IGtleSBpbiBvYmopIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IG9ialtrZXldO1xyXG5cclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgdmFsKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGhhc0NsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgY29uc3QgdmFsdWUgPSBgICR7c3RyfSBgO1xyXG4gICAgICAgICBjb25zdCBjbGVhbiA9IChgICR7ZWwuY2xhc3NOYW1lfSBgKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xyXG5cclxuICAgICAgICAgaWYoY2xlYW4uaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgYWRkQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZighdGhpcy5oYXNDbGFzcyhzdHIpKSB7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgc3RyO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZih0aGlzLmhhc0NsYXNzKHN0cikpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXFxcXHN8XiknICsgc3RyICsgJyhcXFxcc3wkKScpO1xyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgdG9nZ2xlQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGlmKHRoaXMuaGFzQ2xhc3Moc3RyKSkge1xyXG5cclxuICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhzdHIpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgIHRoaXMuYWRkQ2xhc3Moc3RyKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBvbiAoZXY6IHN0cmluZywgb3AxOiBzdHJpbmcgfCBFdmVudExpc3RlbmVyLCBvcDI/OiBFdmVudExpc3RlbmVyKSB7XHJcblxyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIGNvbnN0IGRpcmVjdCA9IHR5cGVvZiBvcDEgPT09ICdmdW5jdGlvbicgJiYgb3AyID09PSB1bmRlZmluZWQ7XHJcbiAgICAgIGNvbnN0IGRlbGVnYXRlID0gdHlwZW9mIG9wMSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIG9wMiA9PT0gJ2Z1bmN0aW9uJztcclxuXHJcbiAgICAgIHRoaXMub2ZmKGV2KTtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBsZXQgY2IgPSBudWxsO1xyXG5cclxuICAgICAgICAgaWYoZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIGNiID0gPEV2ZW50TGlzdGVuZXI+b3AxO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZihkZWxlZ2F0ZSkge1xyXG4gICAgICAgICAgICBjYiA9IHNlbGYuZGVsZWdhdGVFdmVudChlbCwgPHN0cmluZz5vcDEsIG9wMik7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmKGNiKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2LCBjYiwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5ldmVudHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgIHR5cGU6IGV2LFxyXG4gICAgICAgICAgICAgICBoYW5kbGVyOiBjYlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVFNEb20ub246IEludmFsaWQgQXJndW1lbnRzJyk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG4gICBcclxuICAgcHVibGljIG9mZiAoZXY6IHN0cmluZykge1xyXG5cclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgIGNvbnN0IHsgZXZlbnRzIH0gPSB0aGlzOyBcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBjb25zdCBhY3RpdmUgPSB0aGlzLmZpbmRFdmVudChldik7XHJcblxyXG4gICAgICAgICBpZihhY3RpdmUgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgYWN0aXZlLmhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5ldmVudHMgPSBldmVudHMuZmlsdGVyKGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBcclxuICAgICAgICAgcmV0dXJuIChldnQudHlwZSAhPT0gZXYpO1xyXG4gICAgICBcclxuICAgICAgfSwgZXZlbnQpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGh0bWwodmFsPzogc3RyaW5nKSB7XHJcblxyXG4gICAgICBjb25zdCBlbCA9IHRoaXNbMF07XHJcblxyXG4gICAgICBpZighdmFsKSB7XHJcblxyXG4gICAgICAgICByZXR1cm4gZWwuaW5uZXJIVE1MO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZWwuaW5uZXJIVE1MID0gdmFsO1xyXG5cclxuICAgICAgcmV0dXJuIHZhbDtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgYXBwZW5kKGh0bWw6IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGVsLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbCk7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBwcmVwZW5kKGh0bWw6IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGVsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGh0bWwpO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwcml2YXRlIHF1ZXJ5KHFyeTogc3RyaW5nLCBjdHg6IEVsZW1lbnQgfCBEb2N1bWVudCkge1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gdGhpcy5kb2N1bWVudDtcclxuXHJcbiAgICAgIGxldCB0ZXN0O1xyXG4gICAgICBsZXQgbWF0Y2g7XHJcblxyXG4gICAgICBpZiAoKHRlc3QgPSB0aGlzLnJlZ2V4LmV4ZWMocXJ5KSkpIHtcclxuXHJcbiAgICAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzNdKSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG1hdGNoKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzJdKSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZShtYXRjaCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFsxXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkb2MuZ2V0RWxlbWVudEJ5SWQobWF0Y2gpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGN0eC5xdWVyeVNlbGVjdG9yQWxsKHFyeSk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHJpdmF0ZSBmaW5kRXZlbnQoZXY6IHN0cmluZykge1xyXG5cclxuICAgICAgY29uc3QgeyBldmVudHMgfSA9IHRoaXM7XHJcblxyXG4gICAgICByZXR1cm4gZXZlbnRzLmZpbHRlcihmdW5jdGlvbihfZXYpIHtcclxuXHJcbiAgICAgICAgIHJldHVybiAoX2V2LnR5cGUgPT09IGV2KTtcclxuXHJcbiAgICAgIH0sIGV2KVswXTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwcml2YXRlIGRlbGVnYXRlRXZlbnQoZWw6IEhUTUxFbGVtZW50LCBxcnk6IHN0cmluZywgY2I6IEV2ZW50TGlzdGVuZXIpIHtcclxuXHJcbiAgICAgIHJldHVybiAoZXY6IEV2ZW50KSA9PiB7XHJcblxyXG4gICAgICAgICBsZXQgaGl0ID0gZmFsc2U7XHJcbiAgICAgICAgIGxldCBlbHMgPSBuZXcgVFNEb21PYmplY3QocXJ5LCBlbCk7XHJcblxyXG4gICAgICAgICBlbHMuZWFjaChfZWwgPT4ge1xyXG4gICAgICAgICAgICBpZihldi50YXJnZXQgPT0gX2VsKSB7XHJcbiAgICAgICAgICAgICAgIGhpdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICBpZihoaXQpIGNiKGV2KTtcclxuICAgICAgICAgXHJcbiAgICAgIH07XHJcblxyXG4gICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIHByZXZlbnREZWZhdWx0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXY6IEV2ZW50KSB7XHJcblxyXG4gICBpZiAoZXYucHJldmVudERlZmF1bHQpIHtcclxuXHJcbiAgICAgIHJldHVybiBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBcclxuICAgfVxyXG5cclxuICAgcmV0dXJuIGV2LnJldHVyblZhbHVlID0gZmFsc2U7XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCAocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogSFRNTEVsZW1lbnQpID0+IHtcclxuXHJcbiAgIHJldHVybiBuZXcgVFNEb21PYmplY3QocXJ5LCBjdHgpO1xyXG4gICBcclxufTsiXX0=\n"]}