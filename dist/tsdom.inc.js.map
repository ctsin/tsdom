{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","./index","2","Object","defineProperty","value","DOM","qry","ctx","meta","els","document","regex","query","nodeType","len","prototype","find","owner","css","obj","each","el","key","val","style","setProperty","cb","hasClass","str","result","className","replace","indexOf","addClass","_this","removeClass","reg","RegExp","on","ev","addEventListener","off","removeEventListener","test","match","doc","exec","getElementsByClassName","getElementsByTagName","getElementById","querySelectorAll","preventDefault","returnValue"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = require('./index').default;\n},{\"./index\":2}],2:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Meta\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * DOM\r\n *\r\n * -------------------------------- */\r\nvar DOM = (function () {\r\n    function DOM(qry, ctx, meta) {\r\n        var els;\r\n        this.document = document;\r\n        this.meta = meta || {};\r\n        this.regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n        if (typeof qry === 'string') {\r\n            els = this.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    DOM.prototype.find = function (qry) {\r\n        return new DOM(qry, this[0], { owner: this });\r\n    };\r\n    DOM.prototype.css = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    DOM.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            var value = \" \" + str + \" \";\r\n            var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n            if (clean.indexOf(value) > -1) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    DOM.prototype.addClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (!_this.hasClass(str)) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.removeClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (_this.hasClass(str)) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                el.className = el.className.replace(reg, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.on = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.addEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.off = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.removeEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.query = function (qry, ctx) {\r\n        var doc = this.document;\r\n        var test;\r\n        var match;\r\n        if ((test = this.regex.exec(qry))) {\r\n            if ((match = test[3])) {\r\n                return ctx.getElementsByClassName(match);\r\n            }\r\n            if ((match = test[2])) {\r\n                return ctx.getElementsByTagName(match);\r\n            }\r\n            if ((match = test[1])) {\r\n                return doc.getElementById(match);\r\n            }\r\n        }\r\n        return ctx.querySelectorAll(qry);\r\n    };\r\n    return DOM;\r\n}());\r\nexports.DOM = DOM;\r\n/* -----------------------------------\r\n *\r\n * preventDefault\r\n *\r\n * -------------------------------- */\r\nfunction preventDefault(ev) {\r\n    if (ev.preventDefault) {\r\n        return ev.preventDefault();\r\n    }\r\n    return ev.returnValue = false;\r\n}\r\nexports.preventDefault = preventDefault;\r\n/* -----------------------------------\r\n *\r\n * Export\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) {\r\n    return new DOM(qry, ctx);\r\n};\r\n},{}]},{},[1])(1)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5jbHVkZS5qcyIsInNyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7QUNFQTs7OztzQ0FJc0M7O0FBT3RDOzs7O3NDQUlzQztBQUV0QztJQVlHLGFBQW1CLEdBQXlCLEVBQUUsR0FBYSxFQUFFLElBQVk7UUFFdEUsSUFBSSxHQUFRLENBQUM7UUFFYixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxrQ0FBa0MsQ0FBQztRQUVoRCxFQUFFLENBQUEsQ0FBQyxPQUFPLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBRTFCLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBRS9DLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUVMLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFFYixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFBQyxNQUFNLENBQUMsSUFBSSxDQUFBO1FBRXJCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBRXhDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQTtRQUVsQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFFTCxHQUFHLENBQUMsQ0FDRCxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUNwQyxHQUFHLEVBQUUsRUFDTCxJ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LENBQUMsQ0FBQyxDQUFDO2dCQUVyQixNQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTFDLENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXJCLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXBDLENBQUM7UUFFSixDQUFDO1FBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVwQyxDQUFDO0lBR0osVUFBQztBQUFELENBck5BLEFBcU5DLElBQUE7QUFyTlksa0JBQUc7QUF3TmhCOzs7O3NDQUlzQztBQUV0Qyx3QkFBK0IsRUFBUztJQUVyQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUVyQixNQUFNLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRTlCLENBQUM7SUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFFakMsQ0FBQztBQVZELHdDQVVDO0FBR0Q7Ozs7c0NBSXNDO0FBRXRDLGtCQUFlLFVBQUMsR0FBeUIsRUFBRSxHQUFpQjtJQUV6RCxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRTVCLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaW5kZXgnKS5kZWZhdWx0OyIsIlxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogTWV0YVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTWV0YSB7XHJcbiAgIG93bmVyPzogRE9NO1xyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRE9NXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgY2xhc3MgRE9NIHtcclxuXHJcblxyXG4gICBbaW5kZXg6IG51bWJlcl06IEhUTUxFbGVtZW50O1xyXG5cclxuXHJcbiAgIGRvY3VtZW50OiBEb2N1bWVudDtcclxuICAgbWV0YTogSU1ldGE7XHJcbiAgIHJlZ2V4OiBSZWdFeHA7XHJcbiAgIGxlbmd0aDogbnVtYmVyO1xyXG5cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihxcnk6IHN0cmluZyB8IEhUTUxFbGVtZW50LCBjdHg/OiBFbGVtZW50LCBtZXRhPzogSU1ldGEpIHtcclxuXHJcbiAgICAgIGxldCBlbHM6IGFueTtcclxuXHJcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgdGhpcy5tZXRhID0gbWV0YSB8fCB7fTtcclxuICAgICAgdGhpcy5yZWdleCA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvO1xyXG5cclxuICAgICAgaWYodHlwZW9mIHFyeSA9PT0gJ3N0cmluZycpIHtcclxuXHJcbiAgICAgICAgIGVscyA9IHRoaXMucXVlcnkocXJ5LCBjdHggPyBjdHggOiBkb2N1bWVudCk7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgZWxzID0gcXJ5O1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFlbHMpIHJldHVybiB0aGlzXHJcblxyXG4gICAgICBpZiAoZWxzLm5vZGVUeXBlID09PSAxIHx8IGVscyA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICB0aGlzWzBdID0gZWxzO1xyXG4gICAgICAgICB0aGlzLmxlbmd0aCA9IDFcclxuICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgbGV0IGxlbiA9ICh0aGlzLmxlbmd0aCA9IGVscy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgdGhpc1tsZW5dID0gZWxzW2xlbl1cclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgZmluZCAocXJ5OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgRE9NKHFyeSwgdGhpc1swXSwgeyBvd25lcjogdGhpcyB9KTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgY3NzKG9iajogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xyXG5cclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgZm9yKGxldCBrZXkgaW4gb2JqKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcclxuXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGVhY2ggKGNiOiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkKSB7XHJcblxyXG4gICAgICBmb3IobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aDsgaSA8IGxlbjspIHtcclxuXHJcbiAgICAgICAgIGxldCBlbDogSFRNTEVsZW1lbnQgPSB0aGlzW2ldO1xyXG5cclxuICAgICAgICAgaWYoY2IuY2FsbCh0aGlzLCB0aGlzW2ldLCBpKyspID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgaGFzQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBjb25zdCB2YWx1ZSA9IGAgJHtzdHJ9IGA7XHJcbiAgICAgICAgIGNvbnN0IGNsZWFuID0gKGAgJHtlbC5jbGFzc05hbWV9IGApLnJlcGxhY2UoL1tcXG5cXHRdL2csICcgJyk7XHJcblxyXG4gICAgICAgICBpZihjbGVhbi5pbmRleE9mKHZhbHVlKSA+IC0xKSB7XHJcblxyXG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBhZGRDbGFzcyhzdHI6IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGlmKCF0aGlzLmhhc0NsYXNzKHN0cikpIHtcclxuXHJcbiAgICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBzdHI7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyByZW1vdmVDbGFzcyhzdHI6IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGlmKHRoaXMuaGFzQ2xhc3Moc3RyKSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScgKyBzdHIgKyAnKFxcXFxzfCQpJyk7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShyZWcsICcgJyk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBvbiAoZXY6IHN0cmluZywgY2I6IEV2ZW50TGlzdGVuZXIpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2LCBjYik7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuICAgXHJcbiAgIHB1YmxpYyBvZmYgKGV2OiBzdHJpbmcsIGNiOiBFdmVudExpc3RlbmVyKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgY2IpO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwcml2YXRlIHF1ZXJ5KHFyeTogc3RyaW5nLCBjdHg6IEVsZW1lbnQgfCBEb2N1bWVudCkge1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gdGhpcy5kb2N1bWVudDtcclxuXHJcbiAgICAgIGxldCB0ZXN0O1xyXG4gICAgICBsZXQgbWF0Y2g7XHJcblxyXG4gICAgICBpZiAoKHRlc3QgPSB0aGlzLnJlZ2V4LmV4ZWMocXJ5KSkpIHtcclxuXHJcbiAgICAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzNdKSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG1hdGNoKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICgobWF0Y2ggPSB0ZXN0WzJdKSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZShtYXRjaCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFsxXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkb2MuZ2V0RWxlbWVudEJ5SWQobWF0Y2gpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGN0eC5xdWVyeVNlbGVjdG9yQWxsKHFyeSk7XHJcblxyXG4gICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIHByZXZlbnREZWZhdWx0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXY6IEV2ZW50KSB7XHJcblxyXG4gICBpZiAoZXYucHJldmVudERlZmF1bHQpIHtcclxuXHJcbiAgICAgIHJldHVybiBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBcclxuICAgfVxyXG5cclxuICAgcmV0dXJuIGV2LnJldHVyblZhbHVlID0gZmFsc2U7XHJcblxyXG59XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICpcclxuICogRXhwb3J0XHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCAocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogSFRNTEVsZW1lbnQpID0+IHtcclxuXHJcbiAgIHJldHVybiBuZXcgRE9NKHFyeSwgY3R4KTtcclxuICAgXHJcbn07Il19\n"]}