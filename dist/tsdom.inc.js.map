{"version":3,"sources":["tsdom.inc.js"],"names":["f","exports","module","define","amd","window","global","self","this","tsdom","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","Object","defineProperty","value","DOM","qry","ctx","meta","els","document","regex","query","nodeType","len","prototype","find","owner","css","obj","each","el","key","val","style","setProperty","cb","hasClass","str","result","className","replace","indexOf","addClass","_this","removeClass","reg","RegExp","on","ev","addEventListener","off","removeEventListener","test","match","doc","exec","getElementsByClassName","getElementsByTagName","getElementById","querySelectorAll","preventDefault","returnValue","default"],"mappings":"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","file":"tsdom.inc.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.tsdom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\r\n/* -----------------------------------\r\n *\r\n * Meta\r\n *\r\n * -------------------------------- */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* -----------------------------------\r\n *\r\n * DOM\r\n *\r\n * -------------------------------- */\r\nvar DOM = (function () {\r\n    function DOM(qry, ctx, meta) {\r\n        var els;\r\n        this.document = document;\r\n        this.meta = meta || {};\r\n        this.regex = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;\r\n        if (typeof qry === 'string') {\r\n            els = this.query(qry, ctx ? ctx : document);\r\n        }\r\n        else {\r\n            els = qry;\r\n        }\r\n        if (!els)\r\n            return this;\r\n        if (els.nodeType === 1 || els === window) {\r\n            this[0] = els;\r\n            this.length = 1;\r\n        }\r\n        else {\r\n            for (var len = (this.length = els.length); len--; this[len] = els[len])\r\n                ;\r\n        }\r\n    }\r\n    DOM.prototype.find = function (qry) {\r\n        return new DOM(qry, this[0], { owner: this });\r\n    };\r\n    DOM.prototype.css = function (obj) {\r\n        var self = this;\r\n        this.each(function (el) {\r\n            for (var key in obj) {\r\n                var val = obj[key];\r\n                el.style.setProperty(key, val);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.each = function (cb) {\r\n        for (var i = 0, len = this.length; i < len;) {\r\n            var el = this[i];\r\n            if (cb.call(this, this[i], i++) == false) {\r\n                break;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    DOM.prototype.hasClass = function (str) {\r\n        var result = false;\r\n        this.each(function (el) {\r\n            var value = \" \" + str + \" \";\r\n            var clean = (\" \" + el.className + \" \").replace(/[\\n\\t]/g, ' ');\r\n            if (clean.indexOf(value) > -1) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    DOM.prototype.addClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (!_this.hasClass(str)) {\r\n                el.className += ' ' + str;\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.removeClass = function (str) {\r\n        var _this = this;\r\n        this.each(function (el) {\r\n            if (_this.hasClass(str)) {\r\n                var reg = new RegExp('(\\\\s|^)' + str + '(\\\\s|$)');\r\n                el.className = el.className.replace(reg, ' ');\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.on = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.addEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.off = function (ev, cb) {\r\n        this.each(function (el) {\r\n            el.removeEventListener(ev, cb);\r\n        });\r\n        return this;\r\n    };\r\n    DOM.prototype.query = function (qry, ctx) {\r\n        var doc = this.document;\r\n        var test;\r\n        var match;\r\n        if ((test = this.regex.exec(qry))) {\r\n            if ((match = test[3])) {\r\n                return ctx.getElementsByClassName(match);\r\n            }\r\n            if ((match = test[2])) {\r\n                return ctx.getElementsByTagName(match);\r\n            }\r\n            if ((match = test[1])) {\r\n                return doc.getElementById(match);\r\n            }\r\n        }\r\n        return ctx.querySelectorAll(qry);\r\n    };\r\n    return DOM;\r\n}());\r\nexports.DOM = DOM;\r\n/* -----------------------------------\r\n *\r\n * preventDefault\r\n *\r\n * -------------------------------- */\r\nfunction preventDefault(ev) {\r\n    if (ev.preventDefault) {\r\n        return ev.preventDefault();\r\n    }\r\n    return ev.returnValue = false;\r\n}\r\nexports.preventDefault = preventDefault;\r\n/* -----------------------------------\r\n *\r\n * Export\r\n *\r\n * -------------------------------- */\r\nexports.default = function (qry, ctx) {\r\n    return new DOM(qry, ctx);\r\n};\r\n},{}]},{},[1])(1)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDRUE7Ozs7c0NBSXNDOztBQU90Qzs7OztzQ0FJc0M7QUFFdEM7SUFZRyxhQUFtQixHQUF5QixFQUFFLEdBQWEsRUFBRSxJQUFZO1FBRXRFLElBQUksR0FBUSxDQUFDO1FBRWIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsa0NBQWtDLENBQUM7UUFFaEQsRUFBRSxDQUFBLENBQUMsT0FBTyxHQUFHLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQztZQUUxQixHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQztRQUUvQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFFTCxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRWIsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQUMsTUFBTSxDQUFDLElBQUksQ0FBQTtRQUVyQixFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztZQUV4QyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1lBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUE7UUFFbEIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBRUwsR0FBRyxDQUFDLENBQ0QsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFDcEMsR0FBRyxFQUFFLEVBQ0wsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFH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TUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUUxQyxDQUFDO1lBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVyQixNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVwQyxDQUFDO1FBRUosQ0FBQztRQUVELE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFcEMsQ0FBQztJQUdKLFVBQUM7QUFBRCxDQXJOQSxBQXFOQyxJQUFBO0FBck5ZLGtCQUFHO0FBd05oQjs7OztzQ0FJc0M7QUFFdEMsd0JBQStCLEVBQVM7SUFFckMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFFckIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUU5QixDQUFDO0lBRUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBRWpDLENBQUM7QUFWRCx3Q0FVQztBQUdEOzs7O3NDQUlzQztBQUV0QyxrQkFBZSxVQUFDLEdBQXlCLEVBQUUsR0FBaUI7SUFFekQsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUU1QixDQUFDLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBNZXRhXHJcbiAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5pbnRlcmZhY2UgSU1ldGEge1xyXG4gICBvd25lcj86IERPTTtcclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIERPTVxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIERPTSB7XHJcblxyXG5cclxuICAgW2luZGV4OiBudW1iZXJdOiBIVE1MRWxlbWVudDtcclxuXHJcblxyXG4gICBkb2N1bWVudDogRG9jdW1lbnQ7XHJcbiAgIG1ldGE6IElNZXRhO1xyXG4gICByZWdleDogUmVnRXhwO1xyXG4gICBsZW5ndGg6IG51bWJlcjtcclxuXHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocXJ5OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgY3R4PzogRWxlbWVudCwgbWV0YT86IElNZXRhKSB7XHJcblxyXG4gICAgICBsZXQgZWxzOiBhbnk7XHJcblxyXG4gICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICAgIHRoaXMubWV0YSA9IG1ldGEgfHwge307XHJcbiAgICAgIHRoaXMucmVnZXggPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLztcclxuXHJcbiAgICAgIGlmKHR5cGVvZiBxcnkgPT09ICdzdHJpbmcnKSB7XHJcblxyXG4gICAgICAgICBlbHMgPSB0aGlzLnF1ZXJ5KHFyeSwgY3R4ID8gY3R4IDogZG9jdW1lbnQpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgIGVscyA9IHFyeTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghZWxzKSByZXR1cm4gdGhpc1xyXG5cclxuICAgICAgaWYgKGVscy5ub2RlVHlwZSA9PT0gMSB8fCBlbHMgPT09IHdpbmRvdykge1xyXG4gICAgICAgICBcclxuICAgICAgICAgdGhpc1swXSA9IGVscztcclxuICAgICAgICAgdGhpcy5sZW5ndGggPSAxXHJcbiAgICBcclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgIGZvciAoXHJcbiAgICAgICAgICAgIGxldCBsZW4gPSAodGhpcy5sZW5ndGggPSBlbHMubGVuZ3RoKTtcclxuICAgICAgICAgICAgbGVuLS07XHJcbiAgICAgICAgICAgIHRoaXNbbGVuXSA9IGVsc1tsZW5dXHJcbiAgICAgICAgICk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGZpbmQgKHFyeTogc3RyaW5nKSB7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IERPTShxcnksIHRoaXNbMF0sIHsgb3duZXI6IHRoaXMgfSk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGNzcyhvYmo6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcclxuXHJcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGZvcihsZXQga2V5IGluIG9iaikge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdmFsID0gb2JqW2tleV07XHJcblxyXG4gICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbiAgIHB1YmxpYyBlYWNoIChjYjogKGVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZCkge1xyXG5cclxuICAgICAgZm9yKGxldCBpID0gMCwgbGVuID0gdGhpcy5sZW5ndGg7IGkgPCBsZW47KSB7XHJcblxyXG4gICAgICAgICBsZXQgZWw6IEhUTUxFbGVtZW50ID0gdGhpc1tpXTtcclxuXHJcbiAgICAgICAgIGlmKGNiLmNhbGwodGhpcywgdGhpc1tpXSwgaSsrKSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHVibGljIGhhc0NsYXNzKHN0cjogc3RyaW5nKSB7XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgY29uc3QgdmFsdWUgPSBgICR7c3RyfSBgO1xyXG4gICAgICAgICBjb25zdCBjbGVhbiA9IChgICR7ZWwuY2xhc3NOYW1lfSBgKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xyXG5cclxuICAgICAgICAgaWYoY2xlYW4uaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgYWRkQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZighdGhpcy5oYXNDbGFzcyhzdHIpKSB7XHJcblxyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgc3RyO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgcmVtb3ZlQ2xhc3Moc3RyOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIHRoaXMuZWFjaChlbCA9PiB7XHJcblxyXG4gICAgICAgICBpZih0aGlzLmhhc0NsYXNzKHN0cikpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXFxcXHN8XiknICsgc3RyICsgJyhcXFxcc3wkKScpO1xyXG5cclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCAnICcpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgb24gKGV2OiBzdHJpbmcsIGNiOiBFdmVudExpc3RlbmVyKSB7XHJcblxyXG4gICAgICB0aGlzLmVhY2goZWwgPT4ge1xyXG5cclxuICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldiwgY2IpO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgIH1cclxuXHJcbiAgIFxyXG4gICBwdWJsaWMgb2ZmIChldjogc3RyaW5nLCBjYjogRXZlbnRMaXN0ZW5lcikge1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGVsID0+IHtcclxuXHJcbiAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXYsIGNiKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgcHJpdmF0ZSBxdWVyeShxcnk6IHN0cmluZywgY3R4OiBFbGVtZW50IHwgRG9jdW1lbnQpIHtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IHRoaXMuZG9jdW1lbnQ7XHJcblxyXG4gICAgICBsZXQgdGVzdDtcclxuICAgICAgbGV0IG1hdGNoO1xyXG5cclxuICAgICAgaWYgKCh0ZXN0ID0gdGhpcy5yZWdleC5leGVjKHFyeSkpKSB7XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFszXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdHguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtYXRjaCk7XHJcblxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoKG1hdGNoID0gdGVzdFsyXSkpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdHguZ2V0RWxlbWVudHNCeVRhZ05hbWUobWF0Y2gpO1xyXG5cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKChtYXRjaCA9IHRlc3RbMV0pKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZG9jLmdldEVsZW1lbnRCeUlkKG1hdGNoKTtcclxuXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBjdHgucXVlcnlTZWxlY3RvckFsbChxcnkpO1xyXG5cclxuICAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKlxyXG4gKiBwcmV2ZW50RGVmYXVsdFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2OiBFdmVudCkge1xyXG5cclxuICAgaWYgKGV2LnByZXZlbnREZWZhdWx0KSB7XHJcblxyXG4gICAgICByZXR1cm4gZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgXHJcbiAgIH1cclxuXHJcbiAgIHJldHVybiBldi5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG5cclxufVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqXHJcbiAqIEV4cG9ydFxyXG4gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHFyeTogc3RyaW5nIHwgSFRNTEVsZW1lbnQsIGN0eD86IEhUTUxFbGVtZW50KSA9PiB7XHJcblxyXG4gICByZXR1cm4gbmV3IERPTShxcnksIGN0eCk7XHJcbiAgIFxyXG59OyJdfQ==\n"]}